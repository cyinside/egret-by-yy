var GameApp=function(t){function e(){t.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.onAddToStage=function(t){this.addChild(GameConfig.gameScene()),this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),StageUtil.setHorizontalCenter(this.loadingView),StageUtil.setVerticalCenter(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/resource.json","resource/")},s.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.loadError,this),RES.loadGroup("preload")},s.loadError=function(t){alert(t.resItem)},s.onResourceLoadComplete=function(t){"preload"==t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),ConfigModel.getInstance().initConfig(),egret.setTimeout(function(){JSSDK.getSignPackage(this.wxHandler,this)},this,1e3))},s.onResourceProgress=function(t){"preload"==t.groupName&&(this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal),StageUtil.setHorizontalCenter(this.loadingView),StageUtil.setVerticalCenter(this.loadingView))},s.wxHandler=function(){this.stage.removeChild(this.loadingView),this.initScene()},s.initScene=function(){Global.addEventListener(DataEvent.GOTO_SCENE,this.changeScene,this),this.gotoScene(1)},s.changeScene=function(t){this.gotoScene(t.param.sceneID)},s.gotoScene=function(t){switch(t){case 1:this.startScene=new StartScene,this.addChild(this.startScene),StageUtil.setHorizontalCenter(this.startScene);break;case 2:this.contains(this.startScene)&&this.removeChild(this.startScene),this.contains(this.endScene)&&this.removeChild(this.endScene),this.contains(this.endScene1)&&this.removeChild(this.endScene1),ConfigModel.getInstance().reset(),this.chapterScene||(this.chapterScene=new ChapterScene,StageUtil.setHorizontalCenter(this.chapterScene)),this.addChild(this.chapterScene),this.chapterScene.reset();break;case 3:this.contains(this.chapterScene)&&this.removeChild(this.chapterScene),this.endScene||(this.endScene=new EndScene,StageUtil.setHorizontalCenter(this.endScene)),this.addChild(this.endScene);break;case 4:this.contains(this.chapterScene)&&this.removeChild(this.chapterScene),this.endScene1||(this.endScene1=new EndScene1,StageUtil.setHorizontalCenter(this.endScene1)),this.addChild(this.endScene1)}},s.onDeviceMotionHandler=function(){},e}(egret.DisplayObjectContainer);egret.registerClass(GameApp,"GameApp");var LoadingUI=function(t){function e(){t.call(this),this.num1=0,this.createView()}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=100,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center",this.textField.text="Loading...",this.textField1=new egret.TextField,this.addChild(this.textField1),this.textField1.y=150,this.textField1.width=480,this.textField1.height=100,this.textField1.textAlign="center",this.textField1.text="Loading...",egret.Tween.get(this.textField).to({alpha:0},800).to({alpha:1},800)},s.setProgress=function(t,e){this.num1=t/e*100,this.textField1.text=this.num1.toFixed(0)+"%"},e}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var Main=function(t){function e(){t.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.onAddToStage=function(t){this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},s.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup("preload")},s.onResourceLoadComplete=function(t){"preload"==t.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.createGameScene())},s.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},s.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},s.createGameScene=function(){var t=this.createBitmapByName("bgImage");this.addChild(t);var e=this.stage.stageWidth,i=this.stage.stageHeight;t.width=e,t.height=i;var s=new egret.Shape;s.graphics.beginFill(0,.5),s.graphics.drawRect(0,0,e,i),s.graphics.endFill(),s.width=e,s.height=i,this.addChild(s);var n=this.createBitmapByName("egretIcon");this.addChild(n),n.scaleX=.55,n.scaleY=.55,n.anchorOffsetX=n.width/2,n.anchorOffsetY=n.height/2,n.x=e/2,n.y=i/2-60;var h=new egret.TextField;h.textColor=16777215,h.textAlign="center",h.text="Hello Egret",h.size=20,h.x=e-h.width>>1,h.y=(i-h.height>>1)+50,this.addChild(h);var r=new egret.TextField;this.addChild(r),r.alpha=0,r.width=e,r.textAlign=egret.HorizontalAlign.CENTER,r.x=0,r.y=i/2+100,this.textfield=r,RES.getResAsync("description",this.startAnimation,this)},s.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},s.startAnimation=function(t){for(var e=this,i=new egret.HtmlTextParser,s=[],n=0;n<t.length;n++)s.push(i.parser(t[n]));var h=e.textfield,r=-1,a=function(){r++,r>=s.length&&(r=0);var t=s[r];e.changeDescription(h,t);var i=egret.Tween.get(h);i.to({alpha:1},200),i.wait(2e3),i.to({alpha:0},200),i.call(a,e)};a()},s.changeDescription=function(t,e){t.textFlow=e},e}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");var ThemeAdapter=function(){function t(){}var e=(__define,t),i=e.prototype;return i.getTheme=function(t,e,i,s){function n(t){e.call(s,t)}function h(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,h,null),i.call(s))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,h,null),RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_TEXT)},t}();egret.registerClass(ThemeAdapter,"ThemeAdapter",["eui.IThemeAdapter"]);var VideoExample=function(t){function e(){var e=this;t.call(this),[0,1].forEach(function(t){var i=new egret.Video;i.x=50,i.y=280*t+20,i.width=427,i.height=240,i.fullscreen=!1,i.poster="resource/assets/poster.png",i.once(egret.TouchEvent.TOUCH_TAP,e.playVideo,e),i.load("resource/assets/trailer.mp4"),e.addChild(i);var s=new egret.TextField;s.text="Loading",s.x=50,s.y=280*(t+1)-20,i.addEventListener(egret.Event.COMPLETE,function(t){return s.text="Loaded, click video to play"},e),e.addChild(s)})}__extends(e,t);var i=(__define,e),s=i.prototype;return s.playVideo=function(t){console.log(this);var e=t.target;e.play(1),e.once(egret.TouchEvent.TOUCH_TAP,this.stopVideo,this),e.once(egret.Event.ENDED,this.stopVideo,this)},s.stopVideo=function(t){var e=t.target;e.removeEventListener(egret.Event.ENDED,this.stopVideo,this),e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.stopVideo,this),e.pause(),e.once(egret.TouchEvent.TOUCH_TAP,this.playVideo,this)},e}(egret.DisplayObjectContainer);egret.registerClass(VideoExample,"VideoExample");var BasePanel=function(t){function e(e){void 0===e&&(e="assets"),t.call(this),this.w=0,this.h=0,this.assets=RES.getRes(e),this.w=GameConfig.curWidth(),this.h=GameConfig.curHeight(),this.initPanel()}__extends(e,t);var i=(__define,e),s=i.prototype;return s.initPanel=function(){},s.initData=function(){},s.onEnter=function(){},s.onExit=function(){},s.closePanel=function(){PopUpManager.removePopUp(this)},s.getWidth=function(){return this.width},s.getHeight=function(){return this.height},e}(egret.DisplayObjectContainer);egret.registerClass(BasePanel,"BasePanel");var ShareIconPanel=function(t){function e(){t.call(this,"socialIcon"),this.bg=new egret.Sprite,this.shareIconRender=new ShareIconRender,this.initUI()}__extends(e,t);var i=(__define,e),s=i.prototype;return s.initUI=function(){this.bg.graphics.beginFill(0,.5),this.bg.graphics.drawRect(0,0,this.w,this.h),this.bg.graphics.endFill(),this.bg.width=this.w,this.bg.height=this.h,this.addChild(this.bg),this.bg.alpha=0,this.bg.touchEnabled=!0,this.bg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBgBtnTouchTap,this),egret.Tween.get(this.bg).to({alpha:1},300),this.shareIconRender=new ShareIconRender,this.shareIconRender.y=this.h,this.addChild(this.shareIconRender),egret.Tween.get(this.shareIconRender).to({y:this.h-this.shareIconRender.height+60},300,egret.Ease.backOut),this.descTF=new egret.TextField,this.descTF.size=24,this.descTF.height=140,this.descTF.width=230,this.descTF.lineSpacing=10,this.descTF.text="请点击右上角\n将它发送给指定朋友\n或分享到朋友圈",this.descTF.x=this.w-this.descTF.width-40,this.descTF.y=120,this.descTF.textAlign=egret.HorizontalAlign.CENTER,this.addChild(this.descTF),this.descTF.alpha=0,this.arrowImg=new egret.Bitmap,this.arrowImg.texture=this.assets.getTexture("arrow"),this.arrowImg.x=this.w-this.arrowImg.width-30,this.arrowImg.y=20,this.addChild(this.arrowImg),this.arrowImg.alpha=0,Global.addEventListener(MainNotify.updateShareNotify,this.onUpdateShare,this)},s.onBgBtnTouchTap=function(){var t=function(){Global.dispatchEvent(MainNotify.closeShareNotify)};this.descTF.alpha=0,this.arrowImg.alpha=0,egret.Tween.get(this.bg).to({alpha:0},150).call(t,this),egret.Tween.get(this.shareIconRender).to({y:this.h},300)},s.onUpdateShare=function(t){var e=GameConfig.platformType(),i=t.param;switch(e){case"micromessenger":"micromessenger"==i?(this.descTF.text="请点击右上角\n将它发送给指定朋友\n或分享到朋友圈",this.descTF.x=this.w-this.descTF.width-40,this.descTF.y=120,egret.Tween.get(this.descTF).to({alpha:1},150),egret.Tween.get(this.arrowImg).to({alpha:1},150)):(Global.shareUtils(i),egret.Tween.get(this.bg).to({alpha:0},150));break;case"qzone":"micromessenger"==i?(EffectUtils.showTips("抱歉，暂不支持从空间直接分享到微信！"),egret.Tween.get(this.bg).to({alpha:0},150)):"qzone"==i?(this.descTF.text="退出应用后\n从全部动态中转发吧",this.descTF.x=this.w/2-this.descTF.width/2,this.descTF.y=this.h/2-this.descTF.height/2,egret.Tween.get(this.descTF).to({alpha:1},150)):(Global.shareUtils(i),egret.Tween.get(this.bg).to({alpha:0},150));break;case"weibo":"micromessenger"==i?(this.descTF.text="请点击右上角\n将它发送给指定朋友\n或分享到朋友圈",this.descTF.x=this.w-this.descTF.width-40,this.descTF.y=120,egret.Tween.get(this.descTF).to({alpha:1},150),egret.Tween.get(this.arrowImg).to({alpha:1},150)):"weibo"==i?(this.descTF.text="退出应用后\n转发正文\n与朋友一块玩吧",this.descTF.x=this.w/2-this.descTF.width/2,this.descTF.y=this.h/2-this.descTF.height/2,egret.Tween.get(this.descTF).to({alpha:1},150)):(Global.shareUtils(i),egret.Tween.get(this.bg).to({alpha:0},150));break;case"qq":"micromessenger"==i||"qzone"==i||"qq"==i?(this.descTF.text="请点击右上角\n将它发送给朋友\n与朋友一块玩吧",this.descTF.x=this.w-this.descTF.width-40,this.descTF.y=120,egret.Tween.get(this.descTF).to({alpha:1},150),egret.Tween.get(this.arrowImg).to({alpha:1},150)):(Global.shareUtils(i),egret.Tween.get(this.bg).to({alpha:0},150));break;case"renren":"micromessenger"==i?(EffectUtils.showTips("抱歉，暂不支持从空间直接分享到微信！"),egret.Tween.get(this.bg).to({alpha:0},150)):"renren"==i?(this.descTF.text="请点击右上角\n将它发送给朋友\n与朋友一块玩吧",this.descTF.x=this.w-this.descTF.width-40,this.descTF.y=120,egret.Tween.get(this.descTF).to({alpha:1},150),egret.Tween.get(this.arrowImg).to({alpha:1},150)):(Global.shareUtils(i),egret.Tween.get(this.bg).to({alpha:0},150));break;case"txmicroblog":"micromessenger"==i||"qzone"==i||"qq"==i?(this.descTF.text="请点击右上角\n将它发送给朋友\n与朋友一块玩吧",this.descTF.x=this.w-this.descTF.width-40,this.descTF.y=120,egret.Tween.get(this.descTF).to({alpha:1},150),egret.Tween.get(this.arrowImg).to({alpha:1},150)):(Global.shareUtils(i),egret.Tween.get(this.bg).to({alpha:0},150));break;case"douban":"micromessenger"==i?(EffectUtils.showTips("抱歉，暂不支持从空间直接分享到微信！"),egret.Tween.get(this.bg).to({alpha:0},150)):(this.descTF.text="请点击右上角\n将它发送给朋友\n与朋友一块玩吧",this.descTF.x=this.w-this.descTF.width-40,this.descTF.y=120,egret.Tween.get(this.descTF).to({alpha:1},150),egret.Tween.get(this.arrowImg).to({alpha:1},150));break;case"other":Global.shareUtils(i),egret.Tween.get(this.bg).to({alpha:0},150)}egret.Tween.get(this.shareIconRender).to({y:this.h},300)},e}(BasePanel);egret.registerClass(ShareIconPanel,"ShareIconPanel");var VerticalTipsPanel=function(t){function e(e){void 0===e&&(e=!1),t.call(this),this.bg=new egret.Sprite,this.w=0,this.h=0,this.needExchange=!1,this.needExchange=e,this.createView()}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createView=function(){this.w=egret.MainContext.instance.stage.stageWidth,this.h=egret.MainContext.instance.stage.stageHeight,this.textField=new egret.TextField,this.textField.size=36,this.textField.textColor=16777215,this.textField.bold=!0,this.textField.stroke=1,this.textField.strokeColor=0,this.addChild(this.textField),this.textField.width=480,this.textField.textAlign="center",this.textField.text="亲，请开启手机横屏体验哦！",this.needExchange?(this.textField.x=4,this.textField.y=this.h/2-this.textField.height/2-10):(this.textField.x=this.w/2-this.textField.width/2,this.textField.y=this.h/2-this.textField.height/2-10)},e}(egret.Sprite);egret.registerClass(VerticalTipsPanel,"VerticalTipsPanel");var AlertPanel=function(t){function e(e,i,s,n,h){void 0===e&&(e=""),void 0===i&&(i=""),void 0===s&&(s=null),void 0===n&&(n=null),void 0===h&&(h=1),t.call(this),this.titleStr="",this.descStr="",this.type=1,this.titleStr=e,this.descStr=i,this.cancelFun=s,this.acceptFun=n,this.type=h,this.initUI()}__extends(e,t);var i=(__define,e),s=i.prototype;return s.initUI=function(){this.bg=new egret.Bitmap,this.bg.texture=this.assets.getTexture("alertBg"),this.addChild(this.bg),this.bg.touchEnabled=!0,""!=this.titleStr&&(this.titleTF=new egret.TextField,this.addChild(this.titleTF),this.titleTF.textColor=0,this.titleTF.size=24,this.titleTF.width=this.bg.width,this.titleTF.height=24,this.titleTF.y=23,this.titleTF.textAlign="center",this.titleTF.text=this.titleStr),""!=this.descStr&&(this.descTF=new egret.TextField,this.addChild(this.descTF),this.descTF.textColor=0,this.descTF.size=20,this.descTF.width=this.bg.width,this.descTF.height=24,this.descTF.y=this.bg.height/2-this.descTF.height/2+10,this.descTF.textAlign="center",this.descTF.text=this.descStr);var t=this,e=function(e){null!=t.cancelFun&&t.cancelFun(),Global.dispatchEvent(MainNotify.closeAlertNotify)},i=function(e){null!=t.acceptFun&&t.acceptFun(),Global.dispatchEvent(MainNotify.closeAlertNotify)};this.acceptBtn=new EButton(this,"acceptBtn",i),this.addChild(this.acceptBtn),1==this.type?(this.acceptBtn.x=this.bg.width/2-this.acceptBtn.width/2,this.acceptBtn.y=this.bg.height-this.acceptBtn.height/2-10):(this.cancelBtn=new EButton(this,"cancelBtn",e),this.cancelBtn.x=110,this.cancelBtn.y=this.bg.height-this.cancelBtn.height/2-10,this.addChild(this.cancelBtn),this.acceptBtn.x=this.bg.width-this.acceptBtn.width-60-50,this.acceptBtn.y=this.bg.height-this.acceptBtn.height/2-10)},s.getWidth=function(){return this.bg.width},s.getHeight=function(){return this.bg.height},e}(BasePanel);egret.registerClass(AlertPanel,"AlertPanel");var EButton=function(t){function e(e,i,s,n,h,r,a){void 0===s&&(s=null),void 0===n&&(n=""),void 0===h&&(h=30),void 0===r&&(r=1),void 0===a&&(a="assets"),t.call(this),this.assets=RES.getRes("assets"),this.isPlayCartoon=!1,this.cartoonType=1,this.param={context:null,data:null},this.param.context=e,this.init(i,s,n,h,r,a)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.init=function(t,e,i,s,n,h){void 0===e&&(e=null),void 0===i&&(i=""),void 0===s&&(s=30),void 0===n&&(n=1),void 0===h&&(h="assets"),this.cartoonType=n,this.backFun=e,this.btnImg=new egret.Bitmap,"assets"!=h&&(this.assets=RES.getRes(h)),this.btnImg.texture=this.assets.getTexture(t),this.addChild(this.btnImg),""!=i&&(this.textField=new egret.TextField,this.addChild(this.textField),this.textField.size=s,this.textField.textAlign="center",this.textField.stroke=1,this.textField.strokeColor=0,this.textField.text=i,this.textField.width=this.btnImg.width,this.textField.x=this.btnImg.width/2-this.textField.width/2,this.textField.y=this.btnImg.height/2-this.textField.height/2),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onbuttonTouchTap,this)},s.onbuttonTouchTap=function(t){if(!this.isPlayCartoon){this.isPlayCartoon=!0;var e=function(){this.isPlayCartoon=!1},i=function(){1==this.cartoonType?egret.Tween.get(this).to({scaleX:1,scaleY:1,x:this.x-this.btnImg.width/4,y:this.y-this.btnImg.height/4},500,egret.Ease.elasticOut).call(e,this):2==this.cartoonType?egret.Tween.get(this).to({scaleX:1,scaleY:1,x:this.x-this.btnImg.width/4,y:this.y-this.btnImg.height/4},500,egret.Ease.backOut).call(e,this):3==this.cartoonType&&egret.Tween.get(this).to({scaleX:1,scaleY:1,x:this.x-this.btnImg.width/4,y:this.y-this.btnImg.height/4},100).call(e,this)};egret.Tween.get(this).to({scaleX:.5,scaleY:.5,x:this.x+this.btnImg.width/4,y:this.y+this.btnImg.height/4},100,egret.Ease.sineIn).call(i,this),egret.setTimeout(function(){null!=this.backFun&&this.backFun.apply(this.param.context,[this.param.data])},this,300)}},s.setBindData=function(t){this.param.data=t},s.getBindData=function(){return this.param.data},s.getBitmap=function(){return this.btnImg},e}(egret.DisplayObjectContainer);egret.registerClass(EButton,"EButton");var EImage=function(t){function e(e){t.call(this),this._src=null,this._comp=!1,null!=e&&this.load(e)}__extends(e,t);var i=__define,s=e,n=s.prototype;return i(n,"src",function(){return this._src},function(t){this.load(t)}),e.$=function(t){var e=t.$;return delete t.$,t.onload=null,t.onerror=null,e},n.onLoadBack=function(t,e){if(e==this._src){if(t){var i=new egret.Texture;i._setBitmapData(t),this.texture=i}else this.texture=null;this._comp=!0}},n.load=function(t){if(this._src!=t||!this._comp)if(this._src=t,null!=t&&t.length>0){this._comp=!1;var i=new Image;i.$=this,i.onload=function(){e.$(this).onLoadBack(this,this.src)},i.onerror=function(){e.$(this).onLoadBack(this,this.src)},i.src=t}else this.texture=null,this._comp=!0},n.size=function(t,e){this.width=t,this.height=e},n.move=function(t,e){this.x=t,this.y=e},e.loadAsync=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var s=new Image,n=new egret.Bitmap;return s.$=n,s.onload=function(){var t=this.$;delete this.$,this.onload=null,this.onerror=null;var s=new egret.Texture;s._setBitmapData(this),t.texture=s,null!=e&&e.apply(i,[t])},s.onerror=function(){var t=this.$;delete this.$,this.onload=null,this.onerror=null,t.texture=null,null!=e&&e.apply(i,null)},s.src=t,n},e}(egret.Bitmap);egret.registerClass(EImage,"EImage");var ETabBar=function(t){function e(e,i,s,n,h,r,a,o){void 0===n&&(n=null),void 0===h&&(h=[]),void 0===r&&(r=30),void 0===a&&(a=1),void 0===o&&(o="assets"),t.call(this),this.assets=RES.getRes("assets"),this.btnArr=[],this.descStrArr=[],this.isPlayCartoon=!1,this.cartoonType=1,this.isSelectIndex=0,this.imgNormalName="",this.imgSelectName="",this.param={context:null,data:null},this.param.context=e,this.imgNormalName=i,this.imgSelectName=s,this.descStrArr=h,this.init(e,n,h,r,a,o)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.init=function(t,e,i,s,n,h){void 0===e&&(e=null),void 0===i&&(i=[]),void 0===s&&(s=30),void 0===n&&(n=1),void 0===h&&(h="assets"),this.cartoonType=n,this.backFun=e,"assets"!=h&&(this.assets=RES.getRes(h));for(var r=0;r<i.length;r++){var a=new EToggleButton(this,this.imgNormalName,this.imgSelectName,this.onSelectBack,i[r],s,n,h);a.setBindData(r),a.x=a.width*r,this.addChild(a),this.btnArr.push(a),0==r&&(a.setSelected(!0),a.setEnable(!1))}},s.onSelectBack=function(t){this.retset(),this.param.data=t,this.setSelectedIndex(t),this.backFun.apply(this.param.context,[this.param.data])},s.getSelectedIndex=function(){return this.isSelectIndex},s.setSelectedIndex=function(t){void 0===t&&(t=0),this.retset(),this.btnArr[t].setSelected(!0),this.isSelectIndex=t,this.btnArr[t].setEnable(!1)},s.setBindData=function(t){this.param.data=t},s.getBindData=function(){return this.param.data},s.retset=function(){for(var t=0;t<this.descStrArr.length;t++){var e=this.btnArr[t];e.setSelected(!1),e.setEnable(!0)}},e}(egret.DisplayObjectContainer);egret.registerClass(ETabBar,"ETabBar");var ETextField=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.setText=function(t){void 0===t&&(t="");var e=new egret.HtmlTextParser;this.textFlow=e.parser(t)},e}(egret.TextField);egret.registerClass(ETextField,"ETextField");var EToggleButton=function(t){function e(e,i,s,n,h,r,a,o){void 0===n&&(n=null),void 0===h&&(h=""),void 0===r&&(r=30),void 0===a&&(a=1),void 0===o&&(o="assets"),t.call(this),this.assets=RES.getRes("assets"),this.isPlayCartoon=!1,this.cartoonType=1,this.isSelected=!1,this.imgNormalName="",this.imgSelectName="",this.param={context:null,data:null},this.param.context=e,this.imgNormalName=i,this.imgSelectName=s,this.init(n,h,r,a,o)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.init=function(t,e,i,s,n){void 0===t&&(t=null),void 0===e&&(e=""),void 0===i&&(i=30),void 0===s&&(s=1),void 0===n&&(n="assets"),this.cartoonType=s,this.backFun=t,this.btnImg=new egret.Bitmap,"assets"!=n&&(this.assets=RES.getRes(n)),this.btnImg.texture=this.assets.getTexture(this.imgNormalName),this.addChild(this.btnImg),""!=e&&(this.textField=new egret.TextField,this.addChild(this.textField),this.textField.size=i,this.textField.textAlign="center",this.textField.bold=!0,this.textField.stroke=1,this.textField.strokeColor=6705737,this.textField.textColor=12432042,this.textField.text=e,this.textField.width=this.btnImg.width,this.textField.x=this.btnImg.width/2-this.textField.width/2,this.textField.y=this.btnImg.height/2-this.textField.height/2),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onbuttonTouchTap,this)},s.onbuttonTouchTap=function(t){if(!this.isPlayCartoon){this.isPlayCartoon=!0;var e=function(){this.isPlayCartoon=!1},i=function(){this.isSelected?this.btnImg.texture=this.assets.getTexture(this.imgNormalName):this.btnImg.texture=this.assets.getTexture(this.imgSelectName),this.isSelected=!this.isSelected,1==this.cartoonType?egret.Tween.get(this).to({scaleX:1,scaleY:1,x:this.x-this.btnImg.width/4,y:this.y-this.btnImg.height/4},500,egret.Ease.elasticOut).call(e,this):2==this.cartoonType?egret.Tween.get(this).to({scaleX:1,scaleY:1,x:this.x-this.btnImg.width/4,y:this.y-this.btnImg.height/4},500,egret.Ease.backOut).call(e,this):3==this.cartoonType&&egret.Tween.get(this).to({scaleX:1,scaleY:1,x:this.x-this.btnImg.width/4,y:this.y-this.btnImg.height/4},100).call(e,this)};egret.Tween.get(this).to({scaleX:.5,scaleY:.5,x:this.x+this.btnImg.width/4,y:this.y+this.btnImg.height/4},100,egret.Ease.sineIn).call(i,this),egret.setTimeout(function(){null!=this.backFun&&this.backFun.apply(this.param.context,[this.param.data])},this,200)}},s.getBitmap=function(){return this.btnImg},s.setBindData=function(t){this.param.data=t},s.getBindData=function(){return this.param.data},s.getSelected=function(){return this.isSelected},s.setEnable=function(t){this.touchEnabled=t},s.setSelected=function(t){this.isSelected=t,t?this.btnImg.texture=this.assets.getTexture(this.imgSelectName):this.btnImg.texture=this.assets.getTexture(this.imgNormalName)},e}(egret.DisplayObjectContainer);egret.registerClass(EToggleButton,"EToggleButton");var EToggleSwitch=function(t){function e(e,i,s,n,h,r){void 0===i&&(i=""),void 0===s&&(s=""),void 0===n&&(n=""),void 0===h&&(h=null),void 0===r&&(r="assets"),t.call(this),this.assets=RES.getRes("assets"),this.isPlayCartoon=!1,this.isSelected=!1,this.switchOffName="",this.switchOnName="",this.switchBarName="",this.param={context:null,data:null},this.param.context=e,this.switchOffName=i,this.switchOnName=s,this.switchBarName=n,this.init(h,r)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.init=function(t,e){void 0===t&&(t=null),void 0===e&&(e="assets"),this.backFun=t,this.switchOffImg=new egret.Bitmap,this.switchOnImg=new egret.Bitmap,this.switchBarImg=new egret.Bitmap,"assets"!=e&&(this.assets=RES.getRes(e)),this.switchOffImg.texture=this.assets.getTexture(this.switchOffName),this.addChild(this.switchOffImg),this.switchOnImg.texture=this.assets.getTexture(this.switchOnName),this.addChild(this.switchOnImg),this.switchOnImg.alpha=0,this.switchBarImg.texture=this.assets.getTexture(this.switchBarName),this.switchBarImg.x=5,this.switchBarImg.y=this.switchOffImg.height/2-this.switchBarImg.height/2+4,this.addChild(this.switchBarImg),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onbuttonTouchTap,this)},s.onbuttonTouchTap=function(t){if(!this.isPlayCartoon){this.isPlayCartoon=!0;var e=function(){this.isPlayCartoon=!1,this.isSelected=!this.isSelected,null!=this.backFun&&this.backFun.apply(this.param.context,[this.param.data])};this.isSelected?(egret.Tween.get(this.switchBarImg).to({x:5},400).call(e,this),egret.Tween.get(this.switchOffImg).to({alpha:1},400),egret.Tween.get(this.switchOnImg).to({alpha:0},400)):(egret.Tween.get(this.switchBarImg).to({x:this.switchOffImg.width-this.switchBarImg.width-6},400).call(e,this),egret.Tween.get(this.switchOffImg).to({alpha:0},400),egret.Tween.get(this.switchOnImg).to({alpha:1},400))}},s.setBindData=function(t){this.param.data=t},s.getBindData=function(){return this.param.data},s.getSelected=function(){return this.isSelected},e}(egret.DisplayObjectContainer);egret.registerClass(EToggleSwitch,"EToggleSwitch");var ShareIconRender=function(t){function e(){t.call(this),this.titleTF=new egret.TextField,this.weixinTF=new egret.TextField,this.qqzoneTF=new egret.TextField,this.sinaweiboTF=new egret.TextField,this.qqTF=new egret.TextField,this.renrenTF=new egret.TextField,this.qqweiboTF=new egret.TextField,this.doubanTF=new egret.TextField,this.assets=RES.getRes("socialIcon"),this.bg=new egret.Sprite,this.w=0,this.h=0,this.w=GameConfig.curWidth(),this.h=GameConfig.curHeight(),this.init()}__extends(e,t);var i=(__define,e),s=i.prototype;return s.init=function(){this.bg.graphics.beginFill(16777215,.9),this.bg.graphics.drawRect(0,0,this.w,300),this.bg.graphics.endFill(),this.bg.width=this.w,this.bg.height=300,this.addChild(this.bg),this.bg.alpha=1,this.bg.touchEnabled=!0,this.titleTF.size=24,this.titleTF.textColor=0,this.titleTF.text="分享到",this.titleTF.x=this.w/2-this.titleTF.width/2,this.titleTF.y=10,this.titleTF.bold=!0,this.titleTF.textAlign=egret.HorizontalAlign.CENTER,this.addChild(this.titleTF);var t=40,e=130;this.weixinBtn=new EButton(this,"weixin",null,"",30,1,"socialIcon"),this.weixinBtn.x=20,this.weixinBtn.y=t,this.addChild(this.weixinBtn),this.weixinBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onWeixinBtnTouchTap,this),this.qqzoneBtn=new EButton(this,"qqzone",null,"",30,1,"socialIcon"),this.qqzoneBtn.x=this.weixinBtn.x+this.qqzoneBtn.width+20,this.qqzoneBtn.y=t,this.addChild(this.qqzoneBtn),this.qqzoneBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onQQzoneBtnTouchTap,this),this.sinaweiboBtn=new EButton(this,"sinaweibo",null,"",30,1,"socialIcon"),this.sinaweiboBtn.x=this.qqzoneBtn.x+this.sinaweiboBtn.width+20,this.sinaweiboBtn.y=t,this.addChild(this.sinaweiboBtn),this.sinaweiboBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSinaweiboBtnTouchTap,this),this.qqBtn=new EButton(this,"qq",null,"",30,1,"socialIcon"),this.qqBtn.x=this.sinaweiboBtn.x+this.qqBtn.width+20,this.qqBtn.y=t,this.addChild(this.qqBtn),this.qqBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onQQBtnTouchTap,this),this.renrenBtn=new EButton(this,"renren",null,"",30,1,"socialIcon"),this.renrenBtn.x=this.qqBtn.x+this.renrenBtn.width+20,this.renrenBtn.y=t,this.addChild(this.renrenBtn),this.renrenBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRenrenBtnTouchTap,this),this.qqweiboBtn=new EButton(this,"qqweibo",null,"",30,1,"socialIcon"),this.qqweiboBtn.x=20,this.qqweiboBtn.y=e,this.addChild(this.qqweiboBtn),this.qqweiboBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onQQweiboBtnTouchTap,this),this.doubanBtn=new EButton(this,"douban",null,"",30,1,"socialIcon"),this.doubanBtn.x=this.qqweiboBtn.x+this.doubanBtn.width+20,this.doubanBtn.y=e,this.addChild(this.doubanBtn),this.doubanBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDoubanBtnTouchTap,this);var i=16;this.weixinTF.size=i,this.weixinTF.textColor=0,this.weixinTF.text="微信",this.weixinTF.x=this.weixinBtn.x+this.weixinBtn.width/2-this.weixinTF.width/2,this.weixinTF.y=t+this.weixinBtn.height,this.weixinTF.textAlign=egret.HorizontalAlign.CENTER,this.addChild(this.weixinTF),this.qqzoneTF.size=i,this.qqzoneTF.textColor=0,this.qqzoneTF.text="QQ空间",this.qqzoneTF.x=this.qqzoneBtn.x+this.qqzoneBtn.width/2-this.qqzoneTF.width/2,this.qqzoneTF.y=t+this.qqzoneBtn.height,this.qqzoneTF.textAlign=egret.HorizontalAlign.CENTER,this.addChild(this.qqzoneTF),this.sinaweiboTF.size=i,this.sinaweiboTF.textColor=0,this.sinaweiboTF.text="新浪微博",this.sinaweiboTF.x=this.sinaweiboBtn.x+this.sinaweiboBtn.width/2-this.sinaweiboTF.width/2,this.sinaweiboTF.y=t+this.sinaweiboBtn.height,this.sinaweiboTF.textAlign=egret.HorizontalAlign.CENTER,this.addChild(this.sinaweiboTF),this.qqTF.size=i,this.qqTF.textColor=0,this.qqTF.text="QQ好友",this.qqTF.x=this.qqBtn.x+this.qqBtn.width/2-this.qqTF.width/2,this.qqTF.y=t+this.qqBtn.height,this.qqTF.textAlign=egret.HorizontalAlign.CENTER,this.addChild(this.qqTF),this.renrenTF.size=i,this.renrenTF.textColor=0,this.renrenTF.text="人人网",this.renrenTF.x=this.renrenBtn.x+this.renrenBtn.width/2-this.renrenTF.width/2,this.renrenTF.y=t+this.renrenBtn.height,this.renrenTF.textAlign=egret.HorizontalAlign.CENTER,this.addChild(this.renrenTF),this.qqweiboTF.size=i,this.qqweiboTF.textColor=0,this.qqweiboTF.text="QQ微博",this.qqweiboTF.x=this.qqweiboBtn.x+this.qqweiboBtn.width/2-this.qqweiboTF.width/2,this.qqweiboTF.y=e+this.qqweiboBtn.height,this.qqweiboTF.textAlign=egret.HorizontalAlign.CENTER,this.addChild(this.qqweiboTF),this.doubanTF.size=i,this.doubanTF.textColor=0,this.doubanTF.text="豆瓣广播",this.doubanTF.x=this.doubanBtn.x+this.doubanBtn.width/2-this.doubanTF.width/2,this.doubanTF.y=e+this.doubanBtn.height,this.doubanTF.textAlign=egret.HorizontalAlign.CENTER,this.addChild(this.doubanTF)},s.onWeixinBtnTouchTap=function(){Global.dispatchEvent(MainNotify.updateShareNotify,"micromessenger")},s.onQQzoneBtnTouchTap=function(){Global.dispatchEvent(MainNotify.updateShareNotify,"qzone")},s.onSinaweiboBtnTouchTap=function(){Global.dispatchEvent(MainNotify.updateShareNotify,"weibo")},s.onQQBtnTouchTap=function(){Global.dispatchEvent(MainNotify.updateShareNotify,"qq")},s.onRenrenBtnTouchTap=function(){Global.dispatchEvent(MainNotify.updateShareNotify,"renren")},s.onQQweiboBtnTouchTap=function(){Global.dispatchEvent(MainNotify.updateShareNotify,"txmicroblog")},s.onDoubanBtnTouchTap=function(){Global.dispatchEvent(MainNotify.updateShareNotify,"douban")},e}(egret.DisplayObjectContainer);egret.registerClass(ShareIconRender,"ShareIconRender");var TipsManager;!function(t){function e(t,e,i){void 0===e&&(e=""),void 0===i&&(i=0),null==this._dict&&(this._dict=[]),t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.showTips,this),t.addEventListener(egret.TouchEvent.TOUCH_END,this.removeTips,this),t.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.removeTips,this),null==this._dict[t.hashCode]&&(this._dict[t.hashCode]=[],this._dict[t.hashCode].descStr=e,this._dict[t.hashCode].effectType=i)
}function i(t){var e=t.currentTarget,i="",s=0;if(null==this._tips){null!=this._dict[e.hashCode]&&(i=this._dict[e.hashCode].descStr,s=this._dict[e.hashCode].effectType),this._tips=new TipsPanel(this._dict[e.hashCode].descStr),GameConfig.gameScene().topLayer.contains(this._tips)||GameConfig.gameScene().topLayer.addChild(this._tips);var n=e.parent.localToGlobal(e.x,e.y);switch(n.x=n.x+e.width/2,n.y=n.y-this._tips.height,n.x+this._tips.width>GameConfig.curWidth()?n.x=GameConfig.curWidth()-this._tips.width:n.x<0&&(n.x=0),n.y+this._tips.height>GameConfig.curHeight()?n.y=GameConfig.curHeight()-this._tips.height:n.y<0&&(n.y=0),this._tips.x=n.x,this._tips.y=n.y,s){case 0:this._tips.alpha=0,egret.Tween.get(this._tips).to({alpha:1},300);break;case 1:this._tips.alpha=0,this._tips.y+=this._tips.height,egret.Tween.get(this._tips).to({alpha:1,y:this._tips.y-this._tips.height},500,egret.Ease.backOut);break;case 2:this._tips.alpha=0,this._tips.x-=this._tips.width,egret.Tween.get(this._tips).to({alpha:1,x:this._tips.x+this._tips.width},500,egret.Ease.backOut);break;case 3:this._tips.alpha=0,this._tips.x+=this._tips.width,egret.Tween.get(this._tips).to({alpha:1,x:this._tips.x-this._tips.width},500,egret.Ease.backOut)}}}function s(t){t.currentTarget;if(null!=this._tips){var e=function(){GameConfig.gameScene().topLayer.contains(this._tips)&&(GameConfig.gameScene().topLayer.removeChild(this._tips),this._tips=null)};egret.Tween.get(this._tips).to({alpha:0},300).call(e,this)}}t.addTips=e,t.showTips=i,t.removeTips=s}(TipsManager||(TipsManager={}));var TipsPanel=function(t){function e(e){void 0===e&&(e=""),t.call(this),this.descStr="",this.descStr=e,this.initUI()}__extends(e,t);var i=(__define,e),s=i.prototype;return s.initUI=function(){this.bg=new egret.Bitmap,this.bg.texture=this.assets.getTexture("tipsBg"),this.addChild(this.bg),this.bg.touchEnabled=!0,this.descTF=new egret.TextField,this.addChild(this.descTF),this.descTF.textColor=0,this.descTF.size=20,this.descTF.x=5,this.descTF.textAlign="center",this.descTF.text=this.descStr;var t=new egret.Rectangle(5,5,5,5);this.bg.scale9Grid=t,this.bg.width=this.descTF.width+10,this.bg.height=3*this.descTF.height,this.descTF.y=this.bg.height/2-this.descTF.height/2+2},e}(BasePanel);egret.registerClass(TipsPanel,"TipsPanel");var GameConfig;!function(t){function e(){var t=window.navigator.userAgent.toLowerCase(),e=""+t.match(/MicroMessenger/i);return"null"==e?!1:"micromessenger"==e?!0:void 0}function i(){return document.body.clientHeight/document.body.clientWidth>1.32}function s(){var t=window.navigator.userAgent.toLowerCase();""+t.match(/MicroMessenger/i);return""+t.match(/windows nt/i)=="windows nt"?"windows":""+t.match(/iphone/i)=="iphone"?"ios":""+t.match(/android/i)=="android"?"android":""+t.match(/ipad/i)=="ipad"?"ipad":""+t.match(/linux/i)=="linux"?"linux":""+t.match(/mac/i)=="mac"?"mac":""+t.match(/ucbrower/i)=="ucbrower"?"ucbrower":void console.log("未知系统类型")}function n(){var t=window.navigator.userAgent.toLowerCase();return""+t.match(/micromessenger/i)=="micromessenger"?"micromessenger":""+t.match(/qzone/i)=="qzone"?"qzone":""+t.match(/weibo/i)=="weibo"?"weibo":""+t.match(/qq/i)=="qq"?"qq":""+t.match(/renren/i)=="renren"?"renren":""+t.match(/txmicroblog/i)=="txmicroblog"?"txmicroblog":""+t.match(/douban/i)=="douban"?"douban":"other"}function h(){return null==this.curScene&&(this.curScene=new GameScene),this.curScene}function r(){return egret.MainContext.instance.stage}function a(){return egret.MainContext.instance.stage.stageWidth}function o(){return egret.MainContext.instance.stage.stageHeight}function l(){var t=window.orientation;return 90==t?!1:!0}t.isDebug=!1,t.isOnLine=navigator.onLine,t.TextColors={white:16777215,milkWhite:16511407,grayWhite:13547170,yellow:16776960,lightYellow:16765813,orangeYellow:16750848,red:15799040,green:58624,blue:1742039,grayBlue:3101047,purple:15284466,pink:16724016,black:3026221,golden:16766720},t.LabelFontSize={littleSize:12,middleSize:18,normalSize:24,bigSize:36},t.isWeiXin=e,t.isBigScreen=i,t.systemType=s,t.platformType=n;t.gameScene=h,t.curStage=r,t.curWidth=a,t.curHeight=o,t.isVertical=l}(GameConfig||(GameConfig={}));var GlobalData;!function(t){t.currentScore=0,t.bestScore=0,t.rateNum=0,t.useTime=0,t.lastTime=0,t.currentTime=0,t.bestTime=0,t.myCurHP=0,t.myMaxHP=0,t.myStrength=0,t.aiCurHP=0,t.aiMaxHP=0,t.aiStrength=0,t.rankArr=[],t.title="",t.desc="",t.link="",t.imgUrl="",t.myName="",t.fightName="",t.aiNum=0,t.doubleNum=0,t.isBoss=!1,t.bossName="",t.myMaxHP=5e3,t.myCurHP=5e3,t.myStrength=1e3,t.aiMaxHP=4e3,t.aiCurHP=4e3,t.aiStrength=1500,t.myAttackNum=0,t.aiAttackNum=0,t.winerNum=0,t.initIsVertical=!1,t.isVerticalGame=!1}(GlobalData||(GlobalData={}));var RES;!function(t){var e=function(e){function i(){e.call(this),this._dataFormat=egret.URLLoaderDataFormat.TEXT}__extends(i,e);var s=(__define,i),n=s.prototype;return n.getRes=function(e){var i=t.AnalyzerBase.getStringTail(e);return this.fileDic[i]},n.analyzeData=function(t,e){if(e)for(var i=e,s=i.split(new RegExp("\r\n","gi")),n=s.length,h=0;n>h;h++){var r=s[h].indexOf("=");r>1&&(this.fileDic[s[h].substring(0,r)]=s[h].substring(r+1))}},i.TYPE="prop",i}(t.BinAnalyzer);t.PropertiesAnalyzer=e,egret.registerClass(e,"RES.PropertiesAnalyzer")}(RES||(RES={}));var Network;!function(Network){function sendInfo(t,e){void 0===t&&(t=""),void 0===e&&(e="");var i=new egret.URLLoader;i.dataFormat=egret.URLLoaderDataFormat.TEXT,i.addEventListener(egret.Event.COMPLETE,this.onGetComplete,this);var s=new egret.URLRequest(t);s.method=egret.URLRequestMethod.GET,s.data=new egret.URLVariables(e),i.load(s)}function onGetComplete(event){var loader=event.target;loader.dataFormat=egret.URLLoaderDataFormat.TEXT;var data=loader.data,data2=eval("("+data+")"),notify=loader._eventTarget._request.url;lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(notify,data2,!1))}Network.sendInfo=sendInfo,Network.onGetComplete=onGetComplete}(Network||(Network={}));var SocketManager;!function(SocketManager){function connectServer(t,e){void 0===t&&(t=""),void 0===e&&(e=80),this.sock=new egret.WebSocket,this.sock.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onReceiveMessage,this),this.sock.addEventListener(egret.Event.CONNECT,this.onSocketOpen,this),this.sock.connect(t,e)}function onSocketOpen(){}function onReceiveMessage(){var msg=this.sock.readUTF(),data=eval("("+msg+")");lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(data.cmd,data,!1))}function sendMessage(t){void 0===t&&(t=""),this.sock.writeUTF(t)}var sock=new egret.WebSocket;SocketManager.connectServer=connectServer,SocketManager.onSocketOpen=onSocketOpen,SocketManager.onReceiveMessage=onReceiveMessage,SocketManager.sendMessage=sendMessage}(SocketManager||(SocketManager={}));var MainNotify;!function(t){t.onOrientationChange="onOrientationChange",t.onDeviceOrientation="onDeviceOrientation",t.onDeviceMotion="onDeviceMotion",t.closeAlertNotify="closeAlertNotify",t.closeShareNotify="closeAlertNotify",t.updateShareNotify="updateShareNotify",t.openStartPanelNotify="openStartPanelNotify",t.closeStartPanelNotify="closeStartPanelNotify",t.openGamePanelNotify="openGamePanelNotify",t.closeGamePanelNotify="closeGamePanelNotify",t.openGameOverPanelNotify="openGameOverPanelNotify",t.closeGameOverPanelNotify="closeGameOverPanelNotify",t.openSetPanelNotify="openSetPanelNotify",t.closeSetPanelNotify="closeSetPanelNotify",t.openAlertPanelNotify="openAlertPanelNotify",t.closeAlertPanelNotify="closeAlertPanelNotify"}(MainNotify||(MainNotify={}));var EffectUtils;!function(t){function e(t,e){if(void 0===e&&(e=1e3),null==this.rotationArr&&(this.rotationArr=[]),!this.rotationArr[t.hashCode]){null!=this.rotationArr[t.hashCode]&&this.rotationArr[t.hashCode]||(this.rotationArr[t.hashCode]=!0);var i=function(){this.rotationArr[t.hashCode]&&null!=t&&(t.rotation=0,egret.Tween.get(t).to({rotation:360},e).call(i,this))};t.rotation=0,egret.Tween.get(t).to({rotation:360},e).call(i,this)}}function i(t){null==this.rotationArr&&(this.rotationArr=[]),this.rotationArr[t.hashCode]=!1}function s(t,e){void 0===e&&(e=1e3),new BitmapBlink(t,e)}function n(t){var e=80,i=t.x;egret.Tween.get(t).to({x:t.x-10},e),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x+20},e)},this,2*e),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x-20},e)},this,3*e),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x+20},e)},this,4*e),egret.setTimeout(function(){egret.Tween.get(t).to({x:i},e)},this,5*e)}function h(t){void 0===t&&(t=1);var e=GameConfig.curPanel,i=40,s=e.x,n=e.y;1==t?(egret.Tween.get(e).to({x:e.x-10},i),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x+20},i)},this,2*i),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x-20},i)},this,3*i),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x+20},i)},this,4*i),egret.setTimeout(function(){egret.Tween.get(e).to({x:s},i)},this,5*i)):(egret.Tween.get(e).to({x:e.x-10,y:e.y},i),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x+20,y:e.y},i)},this,2*i),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x,y:e.y+15},i)},this,3*i),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x,y:e.y-20},i)},this,4*i),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x,y:e.y+10},i)},this,5*i),egret.setTimeout(function(){egret.Tween.get(e).to({x:s,y:n},i)},this,6*i))}function r(t,e,i){switch(void 0===t&&(t=""),void 0===e&&(e=1),void 0===i&&(i=!1),e){case 1:break;case 2:break;case 3:break;case 4:break;case 5:}}function a(t,e){if(void 0===e&&(e=1),!this.isPlayEffectPlay){this.isPlayEffectPlay=!0;var i=function(){this.isPlayEffectPlay=!1},s=function(){1==e?egret.Tween.get(t).to({scaleX:1,scaleY:1,x:t.x-t.width/4,y:t.y-t.height/4},500,egret.Ease.elasticOut).call(i,this):2==e?egret.Tween.get(t).to({scaleX:1,scaleY:1,x:t.x-t.width/4,y:t.y-t.height/4},500,egret.Ease.backOut).call(i,this):3==e&&egret.Tween.get(t).to({scaleX:1,scaleY:1,x:t.x-t.width/4,y:t.y-t.height/4},100).call(i,this)};egret.Tween.get(t).to({scaleX:.5,scaleY:.5,x:t.x+t.width/4,y:t.y+t.height/4},100,egret.Ease.sineIn).call(s,this)}}function o(t){var e=function(){if(null!=t){var i=function(){t.scaleX=1,t.scaleY=1,egret.Tween.get(t).to({alpha:1},1e3).call(e,self)};t.alpha=1,egret.Tween.get(t).to({scaleX:1.5,scaleY:1.5,alpha:0},1e3).call(i,self)}};e()}function l(t,e,i){void 0===i&&(i=50);var s=function(){if(null!=t){var n=function(){egret.Tween.get(t).to({y:t.y-i},e).call(s,this)};egret.Tween.get(t).to({y:t.y+i},e).call(n,this)}};s()}function c(t,e,i){void 0===i&&(i=20);var s=function(){if(null!=t){var n=function(){egret.Tween.get(t).to({rotation:-i},e).call(s,this)};egret.Tween.get(t).to({rotation:i},e).call(n,this)}};s()}function d(t,e,i){void 0===e&&(e=""),void 0===i&&(i=200);for(var s=e.split(""),n=s.length,h=0;n>h;h++)egret.setTimeout(function(){t.appendText(s[Number(this)])},h,i*h)}t.rotationEffect=e,t.removeRotationEffect=i,t.blinkEffect=s,t.shakeObj=n,t.shakeScreen=h,t.showTips=r;t.playEffect=a,t.playScaleEffect=o,t.flyObj=l,t.rockObj=c,t.typerEffect=d}(EffectUtils||(EffectUtils={}));var Global;!function(t){function e(t,e,i,s){return void 0===e&&(e=null),void 0===i&&(i=!1),void 0===s&&(s=!1),new lcp.LEvent(t,e,i,s)}function i(t,e,i,s){void 0===e&&(e=null),void 0===i&&(i=!1),void 0===s&&(s=!1);var n=new lcp.LEvent(t,e,i,s);lcp.LListener.getInstance().dispatchEvent(n)}function s(t,e,i,s,n){void 0===s&&(s=!1),void 0===n&&(n=0),lcp.LListener.getInstance().addEventListener(t,e,i,s,n)}function n(t){var e=GlobalData.desc,i=GlobalData.link,s=GlobalData.imgUrl;GlobalData.title;if("weibo"==t){var n="http://v.t.sina.com.cn/share/share.php?title="+e+"&url="+i+"&content=utf-8&sourceUrl="+i+"&pic="+s;window.open(n)}else if("txmicroblog"==t){var n="http://v.t.qq.com/share/share.php?title="+e+"&url="+i+"&pic="+s;window.open(n)}else if("qzone"==t){var n="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?summary="+e+"&url="+i+"&pics="+s;window.open(n)}else if("qq"==t){var n="http://connect.qq.com/widget/shareqq/index.html?title="+e+"&url="+i+"&pic="+s;window.open(n)}else if("renren"==t){var n="http://share.renren.com/share/buttonshare.do?link="+i+"&title="+e;window.open(n)}else if("kaixin"==t){var n="http://www.kaixin001.com/repaste/share.php?rurl="+i+"&rcontent="+e;window.open(n)}else if("douban"==t){var n="http://www.douban.com/recommend/?url="+i+"&title="+e;window.open(n)}else if("tieba"==t){var n="http://tieba.baidu.com/f/commit/share/openShareApi?url="+i+"&title="+e;window.open(n)}}function h(t){void 0===t&&(t=!1),t?(window.rootContainer.rotation=90,window.rootContainer.x=egret.MainContext.instance.stage.stageWidth):(window.rootContainer.rotation=0,window.rootContainer.x=0)}function r(e,i,s,n){void 0===e&&(e=""),void 0===i&&(i=""),void 0===s&&(s=null),void 0===n&&(n=1),null==this._alert&&(this._alert=new AlertPanel(e,i,null,s),PopUpManager.addPopUp(this._alert,!0,this._alert.getWidth(),this._alert.getHeight(),n,!0),t.addEventListener(MainNotify.closeAlertNotify,this.closeAlertPanel,this))}function a(e,i,s,n,h){void 0===e&&(e=""),void 0===i&&(i=""),void 0===s&&(s=null),void 0===n&&(n=null),void 0===h&&(h=1),null==this._alert&&(this._alert=new AlertPanel(e,i,s,n,2),PopUpManager.addPopUp(this._alert,!0,this._alert.getWidth(),this._alert.getHeight(),h,!0),t.addEventListener(MainNotify.closeAlertNotify,this.closeAlertPanel,this))}function o(){null!=this._alert&&(PopUpManager.removePopUp(this._alert,1),this._alert=null)}function l(){null==this._share&&(this._share=new ShareIconPanel,PopUpManager.addPopUp(this._share,!1,GameConfig.curWidth(),GameConfig.curHeight()),t.addEventListener(MainNotify.closeShareNotify,this.closeSharePanel,this))}function c(){null!=this._share&&(PopUpManager.removePopUp(this._share,0),this._share=null)}t.Event=e,t.dispatchEvent=i,t.addEventListener=s,t.shareUtils=n,t.rotationResize=h;t.alert=r,t.confirm=a,t.closeAlertPanel=o;t.share=l,t.closeSharePanel=c}(Global||(Global={}));var HitTestUtil=function(){function t(){}var e=(__define,t);e.prototype;return t.hitTest=function(t,e){var i=t.getBounds(),s=e.getBounds();return i.x=t.x,i.y=t.y,s.x=e.x,s.y=e.y,i.intersects(s)},t}();egret.registerClass(HitTestUtil,"HitTestUtil");var JSSDK=function(){function t(){}var e=(__define,t),i=e.prototype;return t.getSignPackage=function(e,i){var s=this;void 0===e&&(e=null),void 0===i&&(i=null);var n=location.href.split("#")[0];this.url="http://www.joyoungfeld-ad.com/php/json.php?url="+encodeURIComponent(n);var h=new egret.URLLoader,r=new egret.URLRequest(this.url);h.load(r),r.method=egret.URLRequestMethod.GET,h.addEventListener(egret.Event.COMPLETE,function(n){s.signPackage=JSON.parse(n.target.data),s.getWeiXinConfig(),t.getWeiXinShareAppMessage(),t.getWeiXinShareTimeline(),i&&e.call(i)},this)},t.getWeiXinConfig=function(){var t=new BodyConfig;t.debug=!1,t.appId=this.signPackage.appId,t.timestamp=this.signPackage.timestamp,t.nonceStr=this.signPackage.nonceStr,t.signature=this.signPackage.signature,t.jsApiList=["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo"],wx.config(t)},t.getWeiXinShareTimeline=function(t,e,i,s,n,h,r){void 0===t&&(t=1),void 0===e&&(e=""),void 0===i&&(i=""),void 0===s&&(s=""),void 0===n&&(n=null),void 0===h&&(h=null),void 0===r&&(r=null);var a=new BodyMenuShareTimeline;1==t?(a.title=ConfigModel.getInstance().wx_default_title,a.link=ConfigModel.getInstance().wx_share_link,a.imgUrl=ConfigModel.getInstance().wx_share_img):2==t&&(a.title=e,a.link=i,a.imgUrl=s),a.trigger=function(){},a.success=function(){r&&n.call(r)},a.cancel=function(){r&&h.call(r)},a.fail=function(t){},wx.onMenuShareTimeline(a)},t.getWeiXinShareAppMessage=function(t,e,i,s,n,h,r,a){void 0===t&&(t=1),void 0===e&&(e=""),void 0===i&&(i=""),void 0===s&&(s=""),void 0===n&&(n=""),void 0===h&&(h=null),void 0===r&&(r=null),void 0===a&&(a=null);var o=new BodyMenuShareAppMessage;1==t?(o.title=ConfigModel.getInstance().wx_default_title,o.link=ConfigModel.getInstance().wx_share_link,o.imgUrl=ConfigModel.getInstance().wx_share_img,o.desc=ConfigModel.getInstance().wx_default_friend_desx):2==t&&(o.title=e,o.link=i,o.imgUrl=s,o.desc=n),o.trigger=function(){},o.success=function(){a&&h.call(a)},o.cancel=function(){a&&r.call(a)},o.fail=function(t){},wx.onMenuShareAppMessage(o)},i.getWeiXinShareQQ=function(){},i.getWeiXinShareWeiBo=function(){},t.url="",t}();egret.registerClass(JSSDK,"JSSDK");var RegUtils;!function(t){function e(t){var e=/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/;return e.test(t)?!0:(alert("您输入的Email地址格式不正确！"),!1)}function i(t){if(h(t))return!1;var e=/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/g;return e.test(t)&&Number(RegExp.$1)<256&&Number(RegExp.$2)<256&&Number(RegExp.$3)<256&&Number(RegExp.$4)<256?!0:!1}function s(t){var e="/^[1][3][0-9]{9}$/",i=new RegExp(e);return i.test(t)?!0:!1}function n(t){var e=/^[0][1-9]{2,3}-[0-9]{5,10}$/,i=/^[1-9]{1}[0-9]{5,8}$/,s="您输入的电话号码不正确!";return t.length>9?e.test(t)?!0:(alert(s),!1):i.test(t)?!0:(alert(s),!1)}function h(t){if(""==t)return!0;var e="^[ ]+$",i=new RegExp(e);return i.test(t)}function r(t){var e=/^[-]{0,1}[0-9]{1,}$/;return e.test(t)}function a(t){var e="^[0-9]+$",i=new RegExp(e);return-1!=t.search(i)?!0:!1}function o(t){var e="^[0-9]+[.][0-9]{0,3}$",i=new RegExp(e);return i.test(t)?!0:!1}function l(t,e){var i=" ",s=-1;if(0==e||1==e){for(;" "==i;)++s,i=t.substr(s,1);t=t.substring(s)}if(0==e||2==e){for(i=" ",s=t.length;" "==i;)--s,i=t.substr(s,1);t=t.substring(0,s+1)}return t}t.checkEmail=e,t.isIP=i,t.checkMobile=s,t.checkPhone=n,t.isNull=h,t.isInteger=r,t.isNumber=a,t.isMoney=o,t.cTrim=l}(RegUtils||(RegUtils={}));var BitmapBlink=function(t){function e(e,i,s){void 0===s&&(s=!0),t.call(this),this._target=e,this._time=i,s&&this.start()}__extends(e,t);var i=(__define,e),s=i.prototype;return s.start=function(){this._currTime=egret.getTimer(),this._target.addEventListener(egret.Event.ENTER_FRAME,this.runDown,this)},s.runDown=function(t){this._target.alpha-=.045,this.checkOver()||this._target.alpha<=.6&&(this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runDown,this),this._target.addEventListener(egret.Event.ENTER_FRAME,this.runUp,this))},s.runUp=function(t){this._target.alpha+=.045,this.checkOver()||this._target.alpha>=1&&(this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runUp,this),this._target.addEventListener(egret.Event.ENTER_FRAME,this.runDown,this))},s.checkOver=function(){var t=egret.getTimer();return t-this._currTime>=this._time?(this.destroy(),!0):!1},s.destroy=function(){this._target.alpha=1,this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runDown,this),this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runUp,this),this.dispatchEventWith(egret.Event.COMPLETE,!1,this._target),this._target=null},e}(egret.EventDispatcher);egret.registerClass(BitmapBlink,"BitmapBlink");var lcp;!function(t){var e=function(t){function e(e,i,s,n){void 0===i&&(i=null),void 0===s&&(s=!1),void 0===n&&(n=!1),t.call(this,e),this.CLASS_NAME="LEvent",i&&(this._obj=i)}__extends(e,t);var i=__define,s=e,n=s.prototype;return n.clone=function(t){return new e(this.type,t?t:this._obj,this.bubbles,this.cancelable)},n.toString=function(){console.log(this.CLASS_NAME,"type","bubbles","cancelable")},i(n,"param",function(){return this._obj}),e}(egret.Event);t.LEvent=e,egret.registerClass(e,"lcp.LEvent")}(lcp||(lcp={}));var lcp;!function(t){var e=function(){function t(){this.CLASS_NAME="LListener",this.isInit=!1,this.isInit,null==this._dispatcher&&(this._dispatcher=new egret.EventDispatcher,this.isInit=!0)}var e=(__define,t),i=e.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},i.addEventListener=function(t,e,i,s,n){void 0===s&&(s=!1),void 0===n&&(n=0),this._dispatcher.addEventListener(t,e,i,s,n)},i.removeEventListener=function(t,e,i,s){void 0===s&&(s=!1),this._dispatcher.removeEventListener(t,e,i,s)},i.hasEventListener=function(t){return this._dispatcher.hasEventListener(t)},i.willTrigger=function(t){return this._dispatcher.willTrigger(t)},i.dispatchEvent=function(t){return this._dispatcher.dispatchEvent(t)},i.toString=function(){return this._dispatcher.toString()},t}();t.LListener=e,egret.registerClass(e,"lcp.LListener")}(lcp||(lcp={}));var TipsUtils;!function(t){function e(t,e){void 0===t&&(t=""),void 0===e&&(e=!1);var i=new egret.TextField;i.size=24,i.y=GameConfig.curHeight()/2,e?i.textColor=GameConfig.TextColors.red:i.textColor=GameConfig.TextColors.green,i.alpha=0,i.text=t,i.strokeColor=0,i.x=GameConfig.curWidth()/2-i.width/2,i.stroke=2,i.bold=!0,i.textAlign=egret.HorizontalAlign.CENTER,GameConfig.gameScene().topLayer.contains(i)||GameConfig.gameScene().topLayer.addChild(i);var s=function(){GameConfig.gameScene().topLayer.contains(i)&&(GameConfig.gameScene().topLayer.removeChild(i),i=null)},n=function(){egret.Tween.get(i).to({alpha:0},500).call(s,this)};i.visible=!0,egret.Tween.get(i).to({y:i.y-120,alpha:1},800,egret.Ease.backOut).call(n,this)}function i(t,e,i){void 0===t&&(t=""),void 0===e&&(e=!1),void 0===i&&(i=!0);var s=new egret.TextField;s.size=24,s.y=GameConfig.curHeight()/2,e?s.textColor=GameConfig.TextColors.red:s.textColor=GameConfig.TextColors.green,s.alpha=0,s.text=t,s.strokeColor=0,i?s.x=-s.width:s.x=GameConfig.curWidth(),s.stroke=2,s.bold=!0,s.textAlign=egret.HorizontalAlign.CENTER,GameConfig.gameScene().topLayer.contains(s)||GameConfig.gameScene().topLayer.addChild(s),i?egret.Tween.get(s).to({x:GameConfig.curWidth()/2-s.width/2-50,alpha:1},300,egret.Ease.sineInOut):egret.Tween.get(s).to({x:GameConfig.curWidth()/2-s.width/2+50,alpha:1},300,egret.Ease.sineInOut),egret.setTimeout(function(){i?egret.Tween.get(s).to({x:s.x+100},500):egret.Tween.get(s).to({x:s.x-100},500)},this,300),egret.setTimeout(function(){i?egret.Tween.get(s).to({x:GameConfig.curWidth()},300,egret.Ease.sineIn):egret.Tween.get(s).to({x:-s.width},300,egret.Ease.sineIn)},this,800),egret.setTimeout(function(){GameConfig.gameScene().topLayer.contains(s)&&(GameConfig.gameScene().topLayer.removeChild(s),s=null)},this,1100)}function s(t,e){void 0===t&&(t=""),void 0===e&&(e=!1);var i=new egret.TextField;i.size=24,i.y=GameConfig.curHeight()/2,e?i.textColor=GameConfig.TextColors.red:i.textColor=GameConfig.TextColors.green,i.alpha=0,i.text=t,i.strokeColor=0,i.x=GameConfig.curWidth()/2,i.stroke=2,i.bold=!0,i.textAlign=egret.HorizontalAlign.CENTER,i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,i.scaleX=0,i.scaleY=0,GameConfig.gameScene().topLayer.contains(i)||GameConfig.gameScene().topLayer.addChild(i);var s=function(){GameConfig.gameScene().topLayer.contains(i)&&(GameConfig.gameScene().topLayer.removeChild(i),i=null)};egret.Tween.get(i).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){egret.Tween.get(i).to({alpha:0},500).call(s,this)},this,1e3)}function n(t,e){void 0===t&&(t=""),void 0===e&&(e=!1);var i=new egret.TextField;i.size=24,i.y=GameConfig.curHeight()/2,e?i.textColor=GameConfig.TextColors.red:i.textColor=GameConfig.TextColors.green,i.alpha=0,i.text=t,i.strokeColor=0,i.x=GameConfig.curWidth()/2,i.stroke=2,i.bold=!0,i.textAlign=egret.HorizontalAlign.CENTER,i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,i.scaleX=4,i.scaleY=4,GameConfig.gameScene().topLayer.contains(i)||GameConfig.gameScene().topLayer.addChild(i);var s=function(){GameConfig.gameScene().topLayer.contains(i)&&(GameConfig.gameScene().topLayer.removeChild(i),i=null)};egret.Tween.get(i).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){egret.Tween.get(i).to({alpha:0},500).call(s,this)},this,1e3)}t.showTipsDownToUp=e,t.showTipsLeftOrRight=i,t.showTipsFromCenter=s,t.showTipsBigToSmall=n}(TipsUtils||(TipsUtils={}));var md5=function(){function t(){this.hexcase=0,this.b64pad=""}var e=(__define,t),i=e.prototype;return i.hex_md5=function(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))},i.b64_md5=function(t){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))},i.any_md5=function(t,e){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)),e)},i.hex_hmac_md5=function(t,e){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},i.b64_hmac_md5=function(t,e){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},i.any_hmac_md5=function(t,e,i){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)),i)},i.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},i.rstr_md5=function(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))},i.rstr_hmac_md5=function(t,e){var i=this.rstr2binl(t);i.length>16&&(i=this.binl_md5(i,8*t.length));for(var s=Array(16),n=Array(16),h=0;16>h;h++)s[h]=909522486^i[h],n[h]=1549556828^i[h];var r=this.binl_md5(s.concat(this.rstr2binl(e)),512+8*e.length);return this.binl2rstr(this.binl_md5(n.concat(r),640))},i.rstr2hex=function(t){try{this.hexcase}catch(e){this.hexcase=0}for(var i,s=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",n="",h=0;h<t.length;h++)i=t.charCodeAt(h),n+=s.charAt(i>>>4&15)+s.charAt(15&i);return n},i.rstr2b64=function(t){try{this.b64pad}catch(e){this.b64pad=""}for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s="",n=t.length,h=0;n>h;h+=3)for(var r=t.charCodeAt(h)<<16|(n>h+1?t.charCodeAt(h+1)<<8:0)|(n>h+2?t.charCodeAt(h+2):0),a=0;4>a;a++)s+=8*h+6*a>8*t.length?this.b64pad:i.charAt(r>>>6*(3-a)&63);return s},i.rstr2any=function(t,e){var i,s,n,h,r,a=e.length,o=Array(Math.ceil(t.length/2));for(i=0;i<o.length;i++)o[i]=t.charCodeAt(2*i)<<8|t.charCodeAt(2*i+1);var l=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),c=Array(l);for(s=0;l>s;s++){for(r=Array(),h=0,i=0;i<o.length;i++)h=(h<<16)+o[i],n=Math.floor(h/a),h-=n*a,(r.length>0||n>0)&&(r[r.length]=n);c[s]=h,o=r}var d="";for(i=c.length-1;i>=0;i--)d+=e.charAt(c[i]);return d},i.str2rstr_utf8=function(t){for(var e,i,s="",n=-1;++n<t.length;)e=t.charCodeAt(n),i=n+1<t.length?t.charCodeAt(n+1):0,e>=55296&&56319>=e&&i>=56320&&57343>=i&&(e=65536+((1023&e)<<10)+(1023&i),n++),127>=e?s+=String.fromCharCode(e):2047>=e?s+=String.fromCharCode(192|e>>>6&31,128|63&e):65535>=e?s+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):2097151>=e&&(s+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return s},i.str2rstr_utf16le=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(255&t.charCodeAt(i),t.charCodeAt(i)>>>8&255);return e},i.str2rstr_utf16be=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(t.charCodeAt(i)>>>8&255,255&t.charCodeAt(i));return e},i.rstr2binl=function(t){for(var e=Array(t.length>>2),i=0;i<e.length;i++)e[i]=0;for(var i=0;i<8*t.length;i+=8)e[i>>5]|=(255&t.charCodeAt(i/8))<<i%32;return e},i.binl2rstr=function(t){for(var e="",i=0;i<32*t.length;i+=8)e+=String.fromCharCode(t[i>>5]>>>i%32&255);return e},i.binl_md5=function(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var i=1732584193,s=-271733879,n=-1732584194,h=271733878,r=0;r<t.length;r+=16){var a=i,o=s,l=n,c=h;i=this.md5_ff(i,s,n,h,t[r+0],7,-680876936),h=this.md5_ff(h,i,s,n,t[r+1],12,-389564586),n=this.md5_ff(n,h,i,s,t[r+2],17,606105819),s=this.md5_ff(s,n,h,i,t[r+3],22,-1044525330),i=this.md5_ff(i,s,n,h,t[r+4],7,-176418897),h=this.md5_ff(h,i,s,n,t[r+5],12,1200080426),n=this.md5_ff(n,h,i,s,t[r+6],17,-1473231341),s=this.md5_ff(s,n,h,i,t[r+7],22,-45705983),i=this.md5_ff(i,s,n,h,t[r+8],7,1770035416),h=this.md5_ff(h,i,s,n,t[r+9],12,-1958414417),n=this.md5_ff(n,h,i,s,t[r+10],17,-42063),s=this.md5_ff(s,n,h,i,t[r+11],22,-1990404162),i=this.md5_ff(i,s,n,h,t[r+12],7,1804603682),h=this.md5_ff(h,i,s,n,t[r+13],12,-40341101),n=this.md5_ff(n,h,i,s,t[r+14],17,-1502002290),s=this.md5_ff(s,n,h,i,t[r+15],22,1236535329),i=this.md5_gg(i,s,n,h,t[r+1],5,-165796510),h=this.md5_gg(h,i,s,n,t[r+6],9,-1069501632),n=this.md5_gg(n,h,i,s,t[r+11],14,643717713),s=this.md5_gg(s,n,h,i,t[r+0],20,-373897302),i=this.md5_gg(i,s,n,h,t[r+5],5,-701558691),h=this.md5_gg(h,i,s,n,t[r+10],9,38016083),n=this.md5_gg(n,h,i,s,t[r+15],14,-660478335),s=this.md5_gg(s,n,h,i,t[r+4],20,-405537848),i=this.md5_gg(i,s,n,h,t[r+9],5,568446438),h=this.md5_gg(h,i,s,n,t[r+14],9,-1019803690),n=this.md5_gg(n,h,i,s,t[r+3],14,-187363961),s=this.md5_gg(s,n,h,i,t[r+8],20,1163531501),i=this.md5_gg(i,s,n,h,t[r+13],5,-1444681467),h=this.md5_gg(h,i,s,n,t[r+2],9,-51403784),n=this.md5_gg(n,h,i,s,t[r+7],14,1735328473),s=this.md5_gg(s,n,h,i,t[r+12],20,-1926607734),i=this.md5_hh(i,s,n,h,t[r+5],4,-378558),h=this.md5_hh(h,i,s,n,t[r+8],11,-2022574463),n=this.md5_hh(n,h,i,s,t[r+11],16,1839030562),s=this.md5_hh(s,n,h,i,t[r+14],23,-35309556),i=this.md5_hh(i,s,n,h,t[r+1],4,-1530992060),h=this.md5_hh(h,i,s,n,t[r+4],11,1272893353),n=this.md5_hh(n,h,i,s,t[r+7],16,-155497632),s=this.md5_hh(s,n,h,i,t[r+10],23,-1094730640),i=this.md5_hh(i,s,n,h,t[r+13],4,681279174),h=this.md5_hh(h,i,s,n,t[r+0],11,-358537222),n=this.md5_hh(n,h,i,s,t[r+3],16,-722521979),s=this.md5_hh(s,n,h,i,t[r+6],23,76029189),i=this.md5_hh(i,s,n,h,t[r+9],4,-640364487),h=this.md5_hh(h,i,s,n,t[r+12],11,-421815835),n=this.md5_hh(n,h,i,s,t[r+15],16,530742520),s=this.md5_hh(s,n,h,i,t[r+2],23,-995338651),i=this.md5_ii(i,s,n,h,t[r+0],6,-198630844),h=this.md5_ii(h,i,s,n,t[r+7],10,1126891415),n=this.md5_ii(n,h,i,s,t[r+14],15,-1416354905),s=this.md5_ii(s,n,h,i,t[r+5],21,-57434055),i=this.md5_ii(i,s,n,h,t[r+12],6,1700485571),h=this.md5_ii(h,i,s,n,t[r+3],10,-1894986606),n=this.md5_ii(n,h,i,s,t[r+10],15,-1051523),s=this.md5_ii(s,n,h,i,t[r+1],21,-2054922799),i=this.md5_ii(i,s,n,h,t[r+8],6,1873313359),h=this.md5_ii(h,i,s,n,t[r+15],10,-30611744),n=this.md5_ii(n,h,i,s,t[r+6],15,-1560198380),s=this.md5_ii(s,n,h,i,t[r+13],21,1309151649),i=this.md5_ii(i,s,n,h,t[r+4],6,-145523070),h=this.md5_ii(h,i,s,n,t[r+11],10,-1120210379),n=this.md5_ii(n,h,i,s,t[r+2],15,718787259),s=this.md5_ii(s,n,h,i,t[r+9],21,-343485551),i=this.safe_add(i,a),s=this.safe_add(s,o),n=this.safe_add(n,l),h=this.safe_add(h,c)}return[i,s,n,h]},i.md5_cmn=function(t,e,i,s,n,h){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(s,h)),n),i)},i.md5_ff=function(t,e,i,s,n,h,r){return this.md5_cmn(e&i|~e&s,t,e,n,h,r)},i.md5_gg=function(t,e,i,s,n,h,r){return this.md5_cmn(e&s|i&~s,t,e,n,h,r)},i.md5_hh=function(t,e,i,s,n,h,r){return this.md5_cmn(e^i^s,t,e,n,h,r)},i.md5_ii=function(t,e,i,s,n,h,r){return this.md5_cmn(i^(e|~s),t,e,n,h,r)},i.safe_add=function(t,e){var i=(65535&t)+(65535&e),s=(t>>16)+(e>>16)+(i>>16);return s<<16|65535&i},i.bit_rol=function(t,e){return t<<e|t>>>32-e},t}();egret.registerClass(md5,"md5");var BitmapDisplay=function(t){function e(e){void 0===e&&(e=""),t.call(this),""!=e&&this.setBitmapByName(e)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.setBitmapByName=function(t){var e=RES.getRes(t);return this.texture=e,this.texture},s.setBitmapByTexture=function(t){this.texture=t},s.load=function(t){var e=new egret.URLLoader;e.dataFormat=egret.URLLoaderDataFormat.TEXTURE,e.addEventListener(egret.Event.COMPLETE,this.loadComplete,this),e.load(new egret.URLRequest(t))},s.loadComplete=function(t){var e=t.target;this.texture=e.data},s.dispose=function(){if(this.texture){var t=this.texture;t.dispose()}},s.setFullScreen=function(){this.scaleX=this.scaleY=Math.max(GameConfig.curWidth()/this.width,GameConfig.curHeight()/this.height)},e}(egret.Bitmap);egret.registerClass(BitmapDisplay,"BitmapDisplay");var DisplayScene=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.setFullScreen=function(){this.scaleX=this.scaleY=Math.max(GameConfig.curWidth()/this.width,GameConfig.curHeight()/this.height)},s.setHorizontalCenter=function(t){return t.x=.5*(this.width-t.width*t.scaleX),new egret.Point(t.x,t.y)},s.setVerticalCenter=function(t){return t.y=.5*(this.height-t.height*t.scaleY),new egret.Point(t.x,t.y)},e}(egret.DisplayObjectContainer);egret.registerClass(DisplayScene,"DisplayScene");var DisplayScrollerScene=function(t){function e(){t.call(this),this.group=new eui.Group,this.scroller=new eui.Scroller,this.scroller.viewport=this.group,this.addChild(this.scroller)}__extends(e,t);
var i=(__define,e),s=i.prototype;return s.setViewRect=function(t,e){void 0===t&&(t=document.body.clientWidth),void 0===e&&(e=document.body.clientHeight);var i=navigator.userAgent.toLowerCase(),s=2;switch(egret.Capabilities.os){case"iOS":-1!=i.indexOf("iphone")?(this.scroller.width=t*s,this.scroller.height=e*s):-1!=i.indexOf("ipad")?(this.scroller.width=t*s,this.scroller.height=.835*e):(this.scroller.width=t*s,this.scroller.height=e*s);break;case"Android":case"Windows Phone":case"Mac OS":this.scroller.width=t*s,this.scroller.height=e*s;break;case"Windows PC":case"Unknown":-1!=i.indexOf("meego")?(this.scroller.width=t*s,this.scroller.height=e*s):(this.scroller.width=t,this.scroller.height=e)}},s.setFullScreen=function(){this.scaleX=this.scaleY=Math.max(GameConfig.curWidth()/this.width,GameConfig.curHeight()/this.height)},s.setHorizontalCenter=function(t){return t.x=.5*(this.width-t.width*t.scaleX),new egret.Point(t.x,t.y)},s.setVerticalCenter=function(t){return t.y=.5*(this.height-t.height*t.scaleY),new egret.Point(t.x,t.y)},e}(egret.DisplayObjectContainer);egret.registerClass(DisplayScrollerScene,"DisplayScrollerScene");var GameScene=function(t){function e(){t.call(this),this.uiLayer=new egret.DisplayObjectContainer,this.topLayer=new egret.DisplayObjectContainer,this.effectLayer=new egret.DisplayObjectContainer,this.mainUILayer=new egret.DisplayObjectContainer,this.maskLayer=new egret.DisplayObjectContainer,this.rotationTipsLayer=new egret.DisplayObjectContainer,this.init()}__extends(e,t);var i=(__define,e),s=i.prototype;return s.init=function(){this.addChild(this.uiLayer),this.addChild(this.topLayer),this.addChild(this.effectLayer),this.addChild(this.mainUILayer),this.addChild(this.maskLayer),this.addChild(this.rotationTipsLayer)},e}(egret.DisplayObjectContainer);egret.registerClass(GameScene,"GameScene");var PanelManager;!function(t){function e(){}function i(){}function s(){}function n(){}function h(){null!=this.gamePanel&&(PopUpManager.removePopUp(this.gamePanel,3),this.gamePanel=null)}function r(){}function a(){}t.initPanel=e,t.openStartPanel=i,t.closeStartPanel=s,t.openGamePanel=n,t.closeGamePanel=h,t.openGameOverPanel=r,t.closeGameOverPanel=a}(PanelManager||(PanelManager={}));var PopUpManager;!function(t){function e(t,e,i,s,n,h){if(void 0===e&&(e=!1),void 0===i&&(i=0),void 0===s&&(s=0),void 0===n&&(n=0),void 0===h&&(h=!1),!GameConfig.gameScene().uiLayer.contains(t)){e&&(this.darkSprite=new egret.Sprite,this.darkSprite.graphics.clear(),this.darkSprite.graphics.beginFill(0,.3),this.darkSprite.graphics.drawRect(0,0,GameConfig.curWidth(),GameConfig.curHeight()),this.darkSprite.graphics.endFill(),this.darkSprite.width=GameConfig.curWidth(),this.darkSprite.height=GameConfig.curHeight(),GameConfig.gameScene().uiLayer.contains(this.darkSprite)||GameConfig.gameScene().uiLayer.addChild(this.darkSprite),this.darkSprite.touchEnabled=!0,egret.Tween.get(this.darkSprite).to({alpha:1},150),this.darkSprite.visible=!0),GameConfig.gameScene().uiLayer.addChild(t),GameConfig.curPanel=t,0!=i?(t.x=GameConfig.curWidth()/2-i/2,t.y=GameConfig.curHeight()/2-s/2):(i=t.width,s=t.height);var r=GameConfig.curWidth()/2-i/2,a=GameConfig.curHeight()/2-s/2;switch(n){case 0:break;case 1:t.alpha=0,t.scaleX=.5,t.scaleY=.5,t.x=t.x+i/4,t.y=t.y+s/4,egret.Tween.get(t).to({alpha:1,scaleX:1,scaleY:1,x:t.x-i/4,y:t.y-s/4},300,egret.Ease.backOut);break;case 2:t.alpha=0,t.scaleX=.5,t.scaleY=.5,t.x=t.x+i/4,t.y=t.y+s/4,egret.Tween.get(t).to({alpha:1,scaleX:1,scaleY:1,x:t.x-i/4,y:t.y-s/4},600,egret.Ease.elasticOut);break;case 3:h?(t.x=-i,egret.Tween.get(t).to({x:r},500,egret.Ease.cubicOut)):(t.x=-i,egret.Tween.get(t).to({x:0},500,egret.Ease.cubicOut));break;case 4:h?(t.x=i,egret.Tween.get(t).to({x:r},500,egret.Ease.cubicOut)):(t.x=i,egret.Tween.get(t).to({x:0},500,egret.Ease.cubicOut));break;case 5:h?(t.y=-s,egret.Tween.get(t).to({y:a},500,egret.Ease.cubicOut)):(t.y=-s,egret.Tween.get(t).to({y:0},500,egret.Ease.cubicOut));break;case 6:h?(t.y=GameConfig.curHeight(),egret.Tween.get(t).to({y:a},500,egret.Ease.cubicOut)):(t.y=s,egret.Tween.get(t).to({y:0},500,egret.Ease.cubicOut))}}}function i(t,e){void 0===e&&(e=0);var i=function(){GameConfig.gameScene().uiLayer.contains(this.darkSprite)&&GameConfig.gameScene().uiLayer.removeChild(this.darkSprite)};switch(this.darkSprite&&egret.Tween.get(this.darkSprite).to({alpha:0},100).call(i,this),e){case 0:break;case 1:egret.Tween.get(t).to({alpha:0,scaleX:0,scaleY:0,x:t.x+t.getWidth()/2,y:t.y+t.getHeight()/2},300);break;case 2:break;case 3:egret.Tween.get(t).to({x:t.getWidth()},500,egret.Ease.cubicOut);break;case 4:egret.Tween.get(t).to({x:-t.getWidth()},500,egret.Ease.cubicOut);break;case 5:egret.Tween.get(t).to({y:t.getHeight()},500,egret.Ease.cubicOut);break;case 6:egret.Tween.get(t).to({y:-t.getHeight()},500,egret.Ease.cubicOut)}egret.setTimeout(function(){GameConfig.gameScene().uiLayer.contains(t)&&GameConfig.gameScene().uiLayer.removeChild(t)},this,500)}t.addPopUp=e,t.removePopUp=i}(PopUpManager||(PopUpManager={}));var StageUtil=function(){function t(){}var e=(__define,t);e.prototype;return t.setHorizontalCenter=function(t){return t.x=.5*(GameConfig.curWidth()-t.width*t.scaleX),new egret.Point(t.x,t.y)},t.setVerticalCenter=function(t){return t.y=.5*(GameConfig.curHeight()-t.height*t.scaleY),new egret.Point(t.x,t.y)},t}();egret.registerClass(StageUtil,"StageUtil");var UIBitmapDisplay=function(t){function e(e){void 0===e&&(e=""),t.call(this),""!=e&&this.setBitmapByName(e)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.setBitmapByName=function(t){var e=RES.getRes(t);return this.texture=e,this.texture},s.setBitmapByTexture=function(t){this.texture=t},s.load=function(t){var e=new egret.URLLoader;e.dataFormat=egret.URLLoaderDataFormat.TEXTURE,e.addEventListener(egret.Event.COMPLETE,this.loadComplete,this),e.load(new egret.URLRequest(t))},s.loadComplete=function(t){var e=t.target;this.texture=e.data},s.dispose=function(){if(this.texture){var t=this.texture;t.dispose()}},s.setFullScreen=function(){this.scaleX=this.scaleY=Math.max(GameConfig.curWidth()/this.width,GameConfig.curHeight()/this.height)},e}(eui.Image);egret.registerClass(UIBitmapDisplay,"UIBitmapDisplay");var DataEvent=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e);i.prototype;return e.GOTO_SCENE="gotoScene",e}(egret.Event);egret.registerClass(DataEvent,"DataEvent");var ScoreEvent=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e);i.prototype;return e.ADD_SCORE="add_score",e}(egret.Event);egret.registerClass(ScoreEvent,"ScoreEvent");var ConfigModel=function(){function t(){this.scoreArr=new Array,this.wx_default_title="",this.wx_title="",this.wx_friend_desx="",this.wx_default_friend_desx="",this.wx_share="",this.wx_share_img="",this.wx_share_link="",this.ruleName="",this.rule=""}var e=(__define,t),i=e.prototype;return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},i.initConfig=function(){var t=RES.getRes("config");this.roleInfo=new RoleInfo(t.role),this.coinInfo=new DropInfo(t.coin),this.pm25Info=new DropInfo(t.pm25),this.bombInfo=new DropInfo(t.bomb),this.chapterInfo=new ChapterInfo(t.chapter),this.ruleName=t.rule_name.toString(),this.rule=t.rule.toString();for(var e=t.level,i=0;i<e.length;i++){var s=new ScoreInfo(e[i]);this.scoreArr.push(s)}this.wx_default_title=t.wx_default_title.toString(),this.wx_title=t.wx_title.toString(),this.wx_friend_desx=t.wx_friend_desx.toString(),this.wx_default_friend_desx=t.wx_default_friend_desx.toString(),this.wx_share=t.wx_share.toString();var n=location.href.split("#")[0];this.wx_share_link=n.substring(0,n.indexOf("index.html")+10),this.wx_share_img=this.wx_share_link.replace("index.html",t.wx_share_img.toString())},i.reset=function(){this.roleInfo.score=0},i.getLevelByScore=function(t){for(var e=this.scoreArr[0],i=this.scoreArr.length-1;i>0;i--)if(e=this.scoreArr[i],t>=e.score)return e;return e},t}();egret.registerClass(ConfigModel,"ConfigModel");var ChapterInfo=function(){function t(t){this.coinGap=parseInt(t.coinGap)}var e=(__define,t);e.prototype;return t}();egret.registerClass(ChapterInfo,"ChapterInfo");var DropInfo=function(){function t(t){this.type=parseInt(t.type),this.aspeed=parseInt(t.aspeed),this.maxSpeed=parseInt(t.maxSpeed)}var e=(__define,t);e.prototype;return t.COIN=1,t.PM25=2,t.BOMB=3,t.DROP_STYLE_SINGLE=1,t.DROP_STYLE_TWO_FLANKS=2,t.DROP_STYLE_MIDDLE=3,t.DROP_STYLE_LEFT=4,t.DROP_STYLE_RIGHT=5,t}();egret.registerClass(DropInfo,"DropInfo");var RoleInfo=function(){function t(t){this.score=0,this.aspeed=parseInt(t.aspeed),this.maxSpeed=parseInt(t.maxSpeed),this.frameRate=parseInt(t.frameRate),this.slowSpeed=parseInt(t.slowSpeed)}var e=(__define,t);e.prototype;return t}();egret.registerClass(RoleInfo,"RoleInfo");var ScoreInfo=function(){function t(t){this.id=0,this.score=0,this.title="",this.text1="",this.text2="",this.id=parseInt(t.id),this.score=parseInt(t.score),this.title=t.title.toString(),this.text1=t.text1.toString(),this.text2=t.text2.toString()}var e=(__define,t);e.prototype;return t}();egret.registerClass(ScoreInfo,"ScoreInfo");var GameOverPanel=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.initPanel=function(){this.bg=new egret.Bitmap,this.bg.texture=this.assets.getTexture("bg"),this.addChild(this.bg),this.bg.touchEnabled=!0,this.htmlTF=new ETextField,this.htmlTF.setText('<font color="0xff0000">我是</font><font color="0x55ff00">多颜色</font><font color="0xff0000">文本</font><font color="0x55ff00">组件</font>'),this.htmlTF.x=this.w/2-this.htmlTF.width/2,this.htmlTF.y=-350,this.addChild(this.htmlTF),this.alertTF=new ETextField,this.alertTF.setText('<font color="0xff0000">下面</font><font color="0x55ff00">是</font><font color="0xff0000">confirm</font><font color="0x55ff00">组件</font>'),this.alertTF.x=this.w/2-this.alertTF.width/2,this.alertTF.y=120,this.addChild(this.alertTF),this.alertTF.alpha=0,this.tipsTF=new ETextField,this.tipsTF.setText('<font color="0xff0000">下面</font><font color="0x55ff00">是</font><font color="0xff0000">tips飘字</font><font color="0x55ff00">组件</font>'),this.tipsTF.x=this.w/2-this.tipsTF.width/2,this.tipsTF.y=this.h-170,this.addChild(this.tipsTF),this.tipsTF.alpha=0,this.helpBtn2=new EButton(this,"helpBtn",this.alert1,"",30,1),this.helpBtn2.x=20,this.helpBtn2.y=200,this.addChild(this.helpBtn2),this.helpBtn2.alpha=0,this.shopBtn2=new EButton(this,"shopBtn",this.alert2,"",30,2),this.shopBtn2.x=150,this.shopBtn2.y=200,this.addChild(this.shopBtn2),this.shopBtn2.alpha=0,this.fbBtn2=new EButton(this,"fbBtn",this.alert3,"",30,3),this.fbBtn2.x=270,this.fbBtn2.y=200,this.addChild(this.fbBtn2),this.fbBtn2.alpha=0,this.setBtn2=new EButton(this,"setBtn",this.alert4,"设置",30,1),this.setBtn2.x=this.w-this.setBtn2.width-20,this.setBtn2.y=200,this.addChild(this.setBtn2),this.setBtn2.alpha=0,this.startBtn=new EButton(this,"startBtn",this.onStartBtnTouchTap),this.startBtn.x=this.w/2-this.startBtn.width/2,this.startBtn.y=this.h/2-this.startBtn.height/2,this.addChild(this.startBtn),this.startBtn.visible=!1,this.helpBtn=new EButton(this,"helpBtn",null,"",30,1),this.helpBtn.x=20,this.helpBtn.y=this.h-this.helpBtn.height-20,this.addChild(this.helpBtn),this.helpBtn.visible=!1,this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tipsEffect1,this),this.shopBtn=new EButton(this,"shopBtn",this.tipsEffect2,"",30,2),this.shopBtn.x=150,this.shopBtn.y=this.h-this.shopBtn.height-20,this.addChild(this.shopBtn),this.shopBtn.visible=!1,this.fbBtn=new EButton(this,"fbBtn",this.tipsEffect3,"",30,3),this.fbBtn.x=270,this.fbBtn.y=this.h-this.fbBtn.height-20,this.addChild(this.fbBtn),this.fbBtn.visible=!1,this.setBtn=new EButton(this,"setBtn",this.tipsEffect4,"设置",30,1),this.setBtn.x=this.w-this.setBtn.width-20,this.setBtn.y=this.h-this.setBtn.height-20,this.addChild(this.setBtn),this.setBtn.visible=!1,this.initEffect()},s.alert1=function(){Global.confirm("提示","我是一个confirm栗子，哈哈",null,null,1)},s.alert2=function(){Global.confirm("提示","我是一个confirm栗子，哈哈",null,null,2)},s.alert3=function(){Global.confirm("提示","我是一个confirm栗子，哈哈",null,null,3)},s.alert4=function(){Global.confirm("提示","我是一个confirm栗子，哈哈",null,null,4)},s.tipsEffect1=function(){EffectUtils.showTips("this.startBtn",1),window.grayscale(this.helpBtn),this.helpBtn},s.tipsEffect2=function(){EffectUtils.showTips("this.startBtn",2)},s.tipsEffect3=function(){EffectUtils.showTips("this.startBtn",4)},s.tipsEffect4=function(){EffectUtils.showTips("this.startBtn",5),egret.setTimeout(function(){EffectUtils.shakeScreen(2)},this,500)},s.initEffect=function(){this.htmlTF.y=-350,this.startBtn.alpha=0,this.helpBtn.y=this.h+150,this.shopBtn.y=this.h+150,this.fbBtn.y=this.h+150,this.setBtn.y=this.h+150;var t=function(){egret.Tween.get(this.startBtn).to({alpha:1},300),egret.Tween.get(this.alertTF).to({alpha:1},300),egret.Tween.get(this.tipsTF).to({alpha:1},300),egret.Tween.get(this.setBtn2).to({alpha:1},300),egret.Tween.get(this.fbBtn2).to({alpha:1},300),egret.Tween.get(this.shopBtn2).to({alpha:1},300),egret.Tween.get(this.helpBtn2).to({alpha:1},300),egret.Tween.get(this.setBtn).to({y:this.h-this.setBtn.height-20},300,egret.Ease.backOut),egret.Tween.get(this.fbBtn).to({y:this.h-this.fbBtn.height-20},300,egret.Ease.backOut),egret.Tween.get(this.shopBtn).to({y:this.h-this.shopBtn.height-20},300,egret.Ease.backOut),egret.Tween.get(this.helpBtn).to({y:this.h-this.helpBtn.height-20},300,egret.Ease.backOut)};this.htmlTF.visible=!0,this.startBtn.visible=!0,this.helpBtn.visible=!0,this.shopBtn.visible=!0,this.fbBtn.visible=!0,this.setBtn.visible=!0,egret.Tween.get(this.htmlTF).to({y:60},600,egret.Ease.backOut).call(t,this)},s.onStartBtnTouchTap=function(t){Global.dispatchEvent(MainNotify.closeGameOverPanelNotify,null,!1)},e}(BasePanel);egret.registerClass(GameOverPanel,"GameOverPanel");var GamePanel=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.initPanel=function(){this.bg=new egret.Bitmap,this.bg.texture=this.assets.getTexture("bg"),this.addChild(this.bg),this.bg.touchEnabled=!0,this.htmlTF=new ETextField,this.htmlTF.setText('<font color="0xff0000">我是</font><font color="0x55ff00">多颜色</font><font color="0xff0000">文本</font><font color="0x55ff00">组件</font>'),this.htmlTF.x=this.w/2-this.htmlTF.width/2,this.htmlTF.y=-350,this.addChild(this.htmlTF),this.alertTF=new ETextField,this.alertTF.setText('<font color="0xff0000">下面</font><font color="0x55ff00">是</font><font color="0xff0000">alert</font><font color="0x55ff00">组件</font>'),this.alertTF.x=this.w/2-this.alertTF.width/2,this.alertTF.y=120,this.addChild(this.alertTF),this.alertTF.alpha=0,this.tipsTF=new ETextField,this.tipsTF.setText('<font color="0xff0000">下面</font><font color="0x55ff00">是</font><font color="0xff0000">tipsmanager</font><font color="0x55ff00">组件</font>'),this.tipsTF.x=this.w/2-this.tipsTF.width/2,this.tipsTF.y=this.h-170,this.addChild(this.tipsTF),this.tipsTF.alpha=0,this.typerTF=new ETextField,this.typerTF.bold=!0,this.typerTF.strokeColor=0,this.typerTF.stroke=1,this.typerTF.width=370,this.typerTF.setText(""),this.typerTF.x=this.w/2-this.typerTF.width/2,this.typerTF.y=this.h/2+100,this.addChild(this.typerTF),EffectUtils.typerEffect(this.typerTF,"牛逼大了，打字机效果呢！"),this.helpBtn2=new EButton(this,"helpBtn",this.alert1,"",30,1),this.helpBtn2.x=20,this.helpBtn2.y=200,this.addChild(this.helpBtn2),this.helpBtn2.alpha=0,this.shopBtn2=new EButton(this,"shopBtn",this.alert2,"",30,2),this.shopBtn2.x=150,this.shopBtn2.y=200,this.addChild(this.shopBtn2),this.shopBtn2.alpha=0,this.fbBtn2=new EButton(this,"fbBtn",this.alert3,"",30,3),this.fbBtn2.x=270,this.fbBtn2.y=200,this.addChild(this.fbBtn2),this.fbBtn2.alpha=0,this.setBtn2=new EButton(this,"setBtn",this.alert4,"设置",30,1),this.setBtn2.x=this.w-this.setBtn2.width-20,this.setBtn2.y=200,this.addChild(this.setBtn2),this.setBtn2.alpha=0,this.startBtn=new EButton(this,"startBtn",this.onStartBtnTouchTap),this.startBtn.x=this.w/2-this.startBtn.width/2,this.startBtn.y=this.h/2-this.startBtn.height/2,this.addChild(this.startBtn),this.startBtn.visible=!1,this.helpBtn=new EButton(this,"helpBtn",null,"",30,1),this.helpBtn.x=20,this.helpBtn.y=this.h-this.helpBtn.height-20,this.addChild(this.helpBtn),this.helpBtn.visible=!1,this.shopBtn=new EButton(this,"shopBtn",null,"",30,2),this.shopBtn.x=150,this.shopBtn.y=this.h-this.shopBtn.height-20,this.addChild(this.shopBtn),this.shopBtn.visible=!1,this.fbBtn=new EButton(this,"fbBtn",null,"",30,3),this.fbBtn.x=270,this.fbBtn.y=this.h-this.fbBtn.height-20,this.addChild(this.fbBtn),this.fbBtn.visible=!1,this.setBtn=new EButton(this,"setBtn",null,"设置",30,1),this.setBtn.x=this.w-this.setBtn.width-20,this.setBtn.y=this.h-this.setBtn.height-20,this.addChild(this.setBtn),this.setBtn.visible=!1,TipsManager.addTips(this.helpBtn,"我是排行榜按钮哦！",1),TipsManager.addTips(this.shopBtn,"我是商店按钮哦！",2),TipsManager.addTips(this.fbBtn,"我是facebook按钮哦！",3),TipsManager.addTips(this.setBtn,"我是设置按钮哦！",4),this.initEffect()},s.alert1=function(){Global.alert("提示","我是一个提示栗子，哈哈",null,1)},s.alert2=function(){Global.alert("提示","我是一个提示栗子，哈哈",null,2)},s.alert3=function(){Global.alert("提示","我是一个提示栗子，哈哈",null,3)},s.alert4=function(){Global.alert("提示","我是一个提示栗子，哈哈",null,4)},s.initEffect=function(){this.htmlTF.y=-350,this.startBtn.alpha=0,this.helpBtn.y=this.h+150,this.shopBtn.y=this.h+150,this.fbBtn.y=this.h+150,this.setBtn.y=this.h+150;var t=function(){egret.Tween.get(this.startBtn).to({alpha:1},300),egret.Tween.get(this.alertTF).to({alpha:1},300),egret.Tween.get(this.tipsTF).to({alpha:1},300),egret.Tween.get(this.setBtn2).to({alpha:1},300),egret.Tween.get(this.fbBtn2).to({alpha:1},300),egret.Tween.get(this.shopBtn2).to({alpha:1},300),egret.Tween.get(this.helpBtn2).to({alpha:1},300),egret.Tween.get(this.setBtn).to({y:this.h-this.setBtn.height-20},300,egret.Ease.backOut),egret.Tween.get(this.fbBtn).to({y:this.h-this.fbBtn.height-20},300,egret.Ease.backOut),egret.Tween.get(this.shopBtn).to({y:this.h-this.shopBtn.height-20},300,egret.Ease.backOut),egret.Tween.get(this.helpBtn).to({y:this.h-this.helpBtn.height-20},300,egret.Ease.backOut)};this.htmlTF.visible=!0,this.startBtn.visible=!0,this.helpBtn.visible=!0,this.shopBtn.visible=!0,this.fbBtn.visible=!0,this.setBtn.visible=!0,egret.Tween.get(this.htmlTF).to({y:60},600,egret.Ease.backOut).call(t,this)},s.onStartBtnTouchTap=function(t){Global.dispatchEvent(MainNotify.openGameOverPanelNotify,null,!1),Global.dispatchEvent(MainNotify.closeGamePanelNotify,null,!1)},e}(BasePanel);egret.registerClass(GamePanel,"GamePanel");var MovieClip=function(t){function e(e,i,s,n,h){void 0===e&&(e=""),void 0===i&&(i=""),void 0===s&&(s=""),void 0===n&&(n=""),void 0===h&&(h=!0),t.call(this),this.state="",this.movieClipName="",this.loop=!0,this.movieClipName=s,this.dataRes=RES.getRes(e);var r=RES.getRes(i);this.loop=h,this.mcDataFactory=new egret.MovieClipDataFactory(this.dataRes,r),this.movieClip=new egret.MovieClip(this.mcDataFactory.generateMovieClipData(this.movieClipName)),this.addChild(this.movieClip),this.getLabelTotalFrames(this.movieClipName,"labels"),this.gotoAndPlay(n)}__extends(e,t);var i=__define,s=e,n=s.prototype;return n.update=function(){this.movieClip.currentFrame==this.getLabelTotalFrames(this.movieClipName,this.state)&&(this.movieClip.movieClipData=this.mcDataFactory.generateMovieClipData(this.movieClipName),this.loop?this.movieClip.gotoAndPlay(this.state):this.stop(),this.dispatchEvent(new egret.Event(egret.Event.COMPLETE)))},i(n,"frameRate",void 0,function(t){this.movieClip.frameRate=t}),i(n,"currentFrame",function(){return this.movieClip.currentFrame}),n.gotoAndPlay=function(t,e){this.state=t,this.movieClip.gotoAndPlay(t,e)},n.gotoAndStop=function(t){this.state=t,this.movieClip.gotoAndStop(t)},n.stop=function(){this.movieClip.stop()},n.play=function(){this.movieClip.stop()},n.dir=function(t){switch(t){case 1:this.movieClip.scaleX=Math.abs(this.movieClip.scaleX),this.movieClip.x=0;break;case-1:this.movieClip.scaleX=-Math.abs(this.movieClip.scaleX),this.movieClip.x=this.movieClip.width}},n.getLabelTotalFrames=function(t,e){for(var i=this.dataRes.mc[t].labels,s=0;s<i.length;s++){var n=i[s];if(n.name==e)return s<i.length-1?parseInt(i[s+1].frame)-parseInt(i[s].frame):this.movieClip.totalFrames-parseInt(this.dataRes.mc[t].frames.length)}return 0},e}(egret.DisplayObjectContainer);egret.registerClass(MovieClip,"MovieClip");var SharePanel=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.initPanel=function(){this.bg=new egret.Bitmap,this.bg.texture=this.assets.getTexture("bg"),this.addChild(this.bg),this.bg.touchEnabled=!0,this.startBtn=new egret.Bitmap,this.startBtn.texture=this.assets.getTexture("startBtn"),this.startBtn.x=this.w/2-this.startBtn.width/2,this.startBtn.y=this.h/2-this.startBtn.height/2,this.addChild(this.startBtn),this.startBtn.touchEnabled=!0,this.startBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStartBtnTouchTap,this)},s.onStartBtnTouchTap=function(t){Global.dispatchEvent(MainNotify.openGamePanelNotify,null,!1),Global.dispatchEvent(MainNotify.closeStartPanelNotify,null,!1)},e}(BasePanel);egret.registerClass(SharePanel,"SharePanel");var ChapterScene=function(t){function e(){t.call(this),this.targetX=0,this.dropArr=new Array,this.blowArr=new Array,this.smokeArr=new Array,this.score=0,this.gameOver=!1,this.configModel=ConfigModel.getInstance(),this.chapterInfo=this.configModel.chapterInfo,this.width=640,this.height=1030,this.bg=new UIBitmapDisplay,this.bg.setBitmapByName("bg2"),this.group.addChild(this.bg),this.setHorizontalCenter(this.bg),this.bg.touchEnabled=!0,this.role=new Role,this.role.setState(0),this.role.setTargetX(.5*this.width),this.role.setBaseY(800),this.role.x=.5*this.width,this.role.y=800,this.group.addChild(this.role),this.setFullScreen(),this.setViewRect(),this.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrameHandler,this),this.dropTimer=new egret.Timer(this.chapterInfo.coinGap),this.dropTimer.addEventListener(egret.TimerEvent.TIMER,this.dropTimeHandler,this),this.dropTimer.start(),this.smokeTimer=new egret.Timer(200),this.smokeTimer.addEventListener(egret.TimerEvent.TIMER,this.smokeTimeHandler,this),this.smokeTimer.start(),this.scoreText=new egret.TextField,this.scoreText.textColor=16777215,this.scoreText.text=this.score.toString(),this.scoreText.size=30,this.scoreText.bold=!0,this.scoreText.x=50,this.scoreText.y=20,this.group.addChild(this.scoreText),Global.addEventListener(MainNotify.onDeviceOrientation,this.onDeviceOrientationHandler,this),Global.addEventListener(ScoreEvent.ADD_SCORE,this.addScoreHandler,this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.onDeviceOrientationHandler=function(t){var e=(t.param.beta,t.param.gamma);t.param.alpha;e>0?-1==this.role.dir&&this.role.right():1==this.role.dir&&this.role.left()},s.onEnterFrameHandler=function(t){this.role.update(),this.checkBorder(),this.dropMove(),this.blowCheck()},s.dropTimeHandler=function(t){var e=10;if(e=this.score<20?12:this.score<40?10:this.score<80?8:this.score<100?6:4,this.dropTimer.currentCount%e!=0)this.dropStyle(DropInfo.COIN);else{var i=Math.floor(2*Math.random())+2;switch(i){case DropInfo.BOMB:this.dropStyle(DropInfo.BOMB)}}},s.smokeTimeHandler=function(t){},s.dropStyle=function(t){var e=0,i=0;switch(t){case DropInfo.COIN:e=DropInfo.DROP_STYLE_SINGLE,i=1;break;case DropInfo.BOMB:switch(e=Math.floor(5*Math.random()+1)){case DropInfo.DROP_STYLE_SINGLE:i=1;break;case DropInfo.DROP_STYLE_TWO_FLANKS:i=2;break;case DropInfo.DROP_STYLE_MIDDLE:i=2;break;case DropInfo.DROP_STYLE_LEFT:i=5;break;case DropInfo.DROP_STYLE_RIGHT:i=5}}this.dropNum(t,e,i)},s.dropNum=function(t,e,i){for(var s,n=new Array,h=0;i>h;h++)switch(t){case DropInfo.COIN:var r=new Coin;n.push(r),this.dropArr.push(r);break;case DropInfo.BOMB:s=new Enemy(DropInfo.BOMB),n.push(s),this.dropArr.push(s)}for(var a=0;a<n.length;a++){var o=n[a];switch(e){case DropInfo.DROP_STYLE_SINGLE:o.x=Math.random()*(this.width-2*o.width)+.5*o.width;break;case DropInfo.DROP_STYLE_TWO_FLANKS:a<n.length/2?o.x=a*o.width+.5*o.width:o.x=this.width-(a-(n.length/2-1))*o.width-.5*o.width;break;case DropInfo.DROP_STYLE_MIDDLE:a<n.length/2?o.x=.5*this.width-(a+1)*o.width:o.x=.5*this.width+(a-(n.length/2-1))*o.width-o.width;break;case DropInfo.DROP_STYLE_LEFT:o.x=a*o.width+o.width,o.y=-(a*o.height);break;case DropInfo.DROP_STYLE_RIGHT:o.x=this.width-a*o.width-2*o.width,o.y=-(a*o.height)}this.group.addChild(o)}},s.dropMove=function(){for(var t=this.dropArr.length-1;t>=0;t--){var e=this.dropArr[t];if(e.move(),e.out()&&0==e.markRemove)return this.group.removeChild(e),void this.dropArr.splice(t,1);if(HitTestUtil.hitTest(this.role,e)&&0==e.markRemove){switch(e.dropInfo.type){case DropInfo.COIN:e.markRemove=1,egret.Tween.get(e,{loop:!1}).to({scaleX:.5,scaleY:.5,alpha:.8},300,egret.Ease.sineIn),egret.Tween.get(e,{loop:!1}).to({x:this.scoreText.x+50,y:this.scoreText.y+30},400,egret.Ease.quartInOut).call(this.dropRemove,e);break;case DropInfo.BOMB:var i=new BlowUp;this.group.addChild(i),i.x=e.x-.5*e.width,i.y=e.y,this.blowArr.push(i),this.group.removeChild(e),this.gameOver||(this.gameOver=!0)}return void this.dropArr.splice(t,1)}}},s.dropRemove=function(){this.parent.removeChild(this),Global.dispatchEvent(ScoreEvent.ADD_SCORE)},s.smokeMove=function(){for(var t=this.smokeArr.length-1;t>=0;t--){var e=this.smokeArr[t];e.update(),e.remove&&(this.group.removeChild(e),this.smokeArr.splice(t,1))}},s.blowCheck=function(){for(var t=this.blowArr.length-1;t>=0;t--){var e=this.blowArr[t];if(e.update(),2==e.state){this.group.removeChild(e),this.blowArr.splice(t,1),this.setGameOver();break}}},s.checkBorder=function(){this.role.x<0?(this.role.x=0,this.role.stop()):this.role.x>this.width-this.role.width&&(this.role.x=this.width-this.role.width,this.role.stop())},s.onTouchHandler=function(t){this.targetX=t.localX,this.targetX>this.role.x+.5*this.role.width?(-1==this.role.dir&&this.role.right(),this.role.clickWalk()):this.targetX<this.role.x+.5*this.role.width&&(1==this.role.dir&&this.role.left(),this.role.clickWalk()),this.targetX<.5*this.role.width?this.targetX=.5*this.role.width:this.targetX>this.width-1.5*this.role.width&&(this.targetX=this.width-1.5*this.role.width),this.role.setTargetX(this.targetX)},s.roleMove=function(){0!=this.role.speed&&(this.role.x+=this.role.speed,this.role.speed>0?this.role.x+.5*this.role.width>=this.targetX&&(this.role.x=this.targetX-.5*this.role.width,this.role.stop()):this.role.speed<0&&this.role.x+.5*this.role.width<=this.targetX&&(this.role.x=this.targetX-.5*this.role.width,this.role.stop()))},s.addScoreHandler=function(t){if(this.score+=1,egret.Tween.removeTweens(this.scoreText),egret.Tween.get(this.scoreText,{loop:!1}).to({scaleX:1.5,scaleY:1.5},100,egret.Ease.sineInOut).call(this.updateScoreText,this).to({scaleX:1,scaleY:1},100,egret.Ease.sineInOut),this.score>30){this.remove();var e=new DataEvent(DataEvent.GOTO_SCENE);e.sceneID=3,Global.dispatchEvent(DataEvent.GOTO_SCENE,e)}},s.updateScoreText=function(){this.scoreText.text=this.score.toString()},s.setGameOver=function(){if(this.gameOver){this.configModel.roleInfo.score=this.score,this.remove();var t=new DataEvent(DataEvent.GOTO_SCENE);t.sceneID=4,Global.dispatchEvent(DataEvent.GOTO_SCENE,t)}},s.remove=function(){for(;this.dropArr.length>0;)this.group.removeChild(this.dropArr[0]),this.dropArr.splice(0,1);for(;this.blowArr.length>0;)this.group.removeChild(this.blowArr[0]),this.blowArr.splice(0,1);for(;this.dropArr.length>0;)this.group.removeChild(this.dropArr[0]),this.dropArr.splice(0,1);for(;this.smokeArr.length>0;)this.group.removeChild(this.smokeArr[0]),this.smokeArr.splice(0,1);this.dropTimer.stop(),this.smokeTimer.stop(),this.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrameHandler,this)},s.reset=function(){this.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrameHandler,this),this.dropTimer.reset(),this.dropTimer.start(),this.smokeTimer.reset(),this.smokeTimer.start(),this.score=0,this.scoreText.text="0",this.gameOver=!1},e}(DisplayScrollerScene);egret.registerClass(ChapterScene,"ChapterScene");var EndScene=function(t){function e(){t.call(this),this.width=640,this.height=1030,this.bg=new UIBitmapDisplay("bg3"),this.group.addChild(this.bg),this.setHorizontalCenter(this.bg),this.text1=new ETextField,this.text1.size=28,this.text1.textAlign=egret.HorizontalAlign.CENTER,this.text1.lineSpacing=10,this.text1.y=390,this.setHorizontalCenter(this.text1),this.shareBtn=new BitmapDisplay("share"),this.group.addChild(this.shareBtn),this.shareBtn.touchEnabled=!0,this.shareBtn.y=700,this.shareBtn.x=105,this.replayBtn=new BitmapDisplay("replay"),this.group.addChild(this.replayBtn),this.replayBtn.touchEnabled=!0,this.replayBtn.y=700,this.replayBtn.x=370,this.infoBut=new BitmapDisplay("infoBut"),this.group.addChild(this.infoBut),this.infoBut.touchEnabled=!0,this.infoBut.y=820,this.infoBut.scaleY=this.infoBut.scaleX=.8,this.infoBut.anchorOffsetX=this.infoBut.width/2,this.infoBut.x=this.width/2,this.infobg=new UIBitmapDisplay("bg5"),this.setHorizontalCenter(this.infobg),this.infobg.touchEnabled=!0,this.infobg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.removeinfo,this),this.infoBut1=new BitmapDisplay("infoBut"),this.infoBut1.touchEnabled=!0,this.infoBut1.y=680,this.setHorizontalCenter(this.infoBut1),this.setFullScreen(),this.setViewRect(),this.shareBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShareHandler,this),this.replayBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onReplayHandler,this),this.infoBut.addEventListener(egret.TouchEvent.TOUCH_TAP,this.oninfoHandler,this),this.infoBut1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.makeTel,this),this.shareArrow=new BitmapDisplay,JSSDK.getWeiXinShareTimeline(2,ConfigModel.getInstance().wx_title,ConfigModel.getInstance().wx_share_link,ConfigModel.getInstance().wx_share_img),JSSDK.getWeiXinShareAppMessage(2,ConfigModel.getInstance().wx_title,ConfigModel.getInstance().wx_share_link,ConfigModel.getInstance().wx_share_img,ConfigModel.getInstance().wx_friend_desx)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.setScore=function(){var t=ConfigModel.getInstance().roleInfo.score;this.scoreInfo=ConfigModel.getInstance().getLevelByScore(ConfigModel.getInstance().roleInfo.score),this.title=new egret.Bitmap;var e=new egret.URLLoader;e.dataFormat=egret.URLLoaderDataFormat.TEXTURE,e.addEventListener(egret.Event.COMPLETE,this.loadComplete,this),e.load(new egret.URLRequest("resource/assets/title/"+this.scoreInfo.id+".png"));var i=this.scoreInfo.text1.replace("xx",t.toString());this.scoreInfo.text2.replace("xx",t.toString());this.text1.setText(i),this.setHorizontalCenter(this.text1)},s.loadComplete=function(t){var e=t.target;this.title=new egret.Bitmap(e.data),this.addChild(this.title),this.setHorizontalCenter(this.title),this.title.y=200},s.onShareHandler=function(t){this.shareArrow.setBitmapByName("share_arrow"),this.addChild(this.shareArrow),this.shareArrow.x=530,this.shareArrow.y=50,egret.Tween.get(this.shareArrow,{loop:!0}).to({alpha:0},500,egret.Ease.sineInOut).to({alpha:1},500,egret.Ease.sineInOut)},s.onReplayHandler=function(t){egret.Tween.removeAllTweens();var e=new DataEvent(DataEvent.GOTO_SCENE);e.sceneID=2,Global.dispatchEvent(DataEvent.GOTO_SCENE,e)},s.oninfoHandler=function(){this.group.addChild(this.infobg),this.group.addChild(this.infoBut1)},s.removeinfo=function(){this.group.removeChild(this.infobg),this.group.removeChild(this.infoBut1)},s.makeTel=function(){window.location.href="tel:02022336688"},s.remove=function(){this.shareBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onShareHandler,this),this.replayBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onReplayHandler,this)},e}(DisplayScrollerScene);egret.registerClass(EndScene,"EndScene");var EndScene1=function(t){function e(){t.call(this),this.width=640,this.height=1030,this.bg=new UIBitmapDisplay("bg4"),this.group.addChild(this.bg),this.setHorizontalCenter(this.bg),this.replayBtn=new BitmapDisplay("replay"),this.group.addChild(this.replayBtn),this.replayBtn.touchEnabled=!0,this.setHorizontalCenter(this.replayBtn),this.replayBtn.y=750,this.setFullScreen(),this.setViewRect(),this.replayBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onReplayHandler,this),this.shareArrow=new BitmapDisplay
}__extends(e,t);var i=(__define,e),s=i.prototype;return s.setScore=function(){var t=ConfigModel.getInstance().roleInfo.score;this.scoreInfo=ConfigModel.getInstance().getLevelByScore(ConfigModel.getInstance().roleInfo.score),this.title=new egret.Bitmap;var e=new egret.URLLoader;e.dataFormat=egret.URLLoaderDataFormat.TEXTURE,e.addEventListener(egret.Event.COMPLETE,this.loadComplete,this),e.load(new egret.URLRequest("resource/assets/title/"+this.scoreInfo.id+".png"));var i=this.scoreInfo.text1.replace("xx",t.toString());this.scoreInfo.text2.replace("xx",t.toString());this.text1.setText(i),this.setHorizontalCenter(this.text1)},s.loadComplete=function(t){var e=t.target;this.title=new egret.Bitmap(e.data),this.addChild(this.title),this.setHorizontalCenter(this.title),this.title.y=200},s.onShareHandler=function(t){this.shareArrow.setBitmapByName("share_arrow"),this.addChild(this.shareArrow),this.shareArrow.x=530,this.shareArrow.y=50,egret.Tween.get(this.shareArrow,{loop:!0}).to({alpha:0},500,egret.Ease.sineInOut).to({alpha:1},500,egret.Ease.sineInOut)},s.onReplayHandler=function(t){egret.Tween.removeAllTweens();var e=new DataEvent(DataEvent.GOTO_SCENE);e.sceneID=2,Global.dispatchEvent(DataEvent.GOTO_SCENE,e)},s.remove=function(){},e}(DisplayScrollerScene);egret.registerClass(EndScene1,"EndScene1");var StartScene=function(t){function e(){t.call(this),this.width=640,this.height=1030,this.bg=new UIBitmapDisplay("bg1"),this.group.addChild(this.bg),this.setHorizontalCenter(this.bg),this.btn=new BitmapDisplay("start"),this.group.addChild(this.btn),this.btn.touchEnabled=!0,this.btn.anchorOffsetX=this.btn.width/2,this.btn.anchorOffsetY=this.btn.height,this.btn.y=765,this.btn.x=320,this.btn.scaleX=.9,this.btn.scaleY=.9,egret.Tween.get(this.btn,{loop:!0}).to({scaleX:1.1,scaleY:1.1},2e3,egret.Ease.sineInOut).to({scaleX:.9,scaleY:.9},2e3,egret.Ease.sineInOut),this.setFullScreen(),this.setViewRect(),this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.onTouchHandler=function(t){this.startMusic(),this.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.btn.touchEnabled=!1;var e=new DataEvent(DataEvent.GOTO_SCENE);e.sceneID=2,Global.dispatchEvent(DataEvent.GOTO_SCENE,e)},s.startMusic=function(){var t=document.getElementById("bgmusic");1==t.paused&&t.play()},s.remove=function(){this.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this)},e}(DisplayScrollerScene);egret.registerClass(StartScene,"StartScene");var BlowUp=function(t){function e(){t.call(this),this.state=1,this.mc=new MovieClip("blow_up_json","blow_up_png","blow_up","blow_up",!1),this.mc.frameRate=30,this.addChild(this.mc),this.mc.addEventListener(egret.Event.COMPLETE,this.completeHandler,this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.update=function(){this.mc.update()},s.completeHandler=function(t){this.state=2,this.mc.removeEventListener(egret.Event.COMPLETE,this.completeHandler,this)},e}(egret.DisplayObjectContainer);egret.registerClass(BlowUp,"BlowUp");var Drop=function(t){function e(e){void 0===e&&(e=0),t.call(this),this.speed=5,this.markRemove=0}__extends(e,t);var i=(__define,e),s=i.prototype;return s.drawBorder=function(){var t=new egret.Shape,e=this.bmp.getBounds();t.graphics.lineStyle(3,16777215),t.graphics.drawRect(e.x,e.y,e.width,e.height),this.addChild(t)},s.move=function(){this.speed+=this.dropInfo.aspeed,this.speed>=this.dropInfo.maxSpeed&&(this.speed=this.dropInfo.maxSpeed),this.y+=this.speed},s.out=function(){return this.y>this.parent.height?!0:!1},e}(egret.DisplayObjectContainer);egret.registerClass(Drop,"Drop");var Coin=function(t){function e(){t.call(this),this.dropInfo=ConfigModel.getInstance().coinInfo;var e=Math.floor(6*Math.random()+1);this.bmp=new BitmapDisplay,this.bmp.setBitmapByName("coin_"+e.toString()),this.addChild(this.bmp)}__extends(e,t);var i=(__define,e);i.prototype;return e}(Drop);egret.registerClass(Coin,"Coin");var Enemy=function(t){function e(e){switch(t.call(this),this.bmp=new BitmapDisplay,e){case DropInfo.BOMB:this.bmp.setBitmapByName("bomb"),this.dropInfo=ConfigModel.getInstance().bombInfo;break;case DropInfo.PM25:this.bmp.setBitmapByName("pm25"),this.dropInfo=ConfigModel.getInstance().pm25Info}this.addChild(this.bmp)}__extends(e,t);var i=(__define,e);i.prototype;return e}(Drop);egret.registerClass(Enemy,"Enemy");var Role=function(t){function e(){t.call(this),this.speed=0,this.maxSpeed=0,this.state=0,this.dir=1,this.angle=0,this.baseY=0,this.y_speed=.01,this.easing=.05,this.targetX=0,this.timeOutID=0,this.configModel=ConfigModel.getInstance(),this.roleInfo=this.configModel.roleInfo,this.role=new MovieClip("role_json","role_png","role","walk",!0),this.role.scaleX=this.role.scaleY=1,this.role.frameRate=this.roleInfo.frameRate,this.addChild(this.role),this.buff=new RoleBuff,this.addChild(this.buff)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.drawBorder=function(){var t=new egret.Shape,e=this.role.getBounds();t.graphics.lineStyle(3,16777215),t.graphics.drawRect(e.x,e.y,e.width,e.height),this.addChild(t)},s.clickWalk=function(){},s.orientationWalk=function(){this.speed+=this.roleInfo.aspeed,this.speed>this.maxSpeed&&(this.speed=this.maxSpeed),1==this.dir?this.x+=this.speed:this.x-=this.speed},s.left=function(){this.role.dir(-1),this.dir=-1,this.stop()},s.right=function(){this.role.dir(1),this.dir=1,this.stop()},s.stop=function(){this.speed=0},s.update=function(){this.role.update(),this.orientationWalk(),this.updateY()},s.updateY=function(){this.y=this.baseY+10*Math.sin(this.angle),this.angle+=this.y_speed},s.updateX=function(){var t=this.targetX-this.x;if(Math.abs(t)<1)this.x=this.targetX;else{var e=t*this.easing;this.x+=e}},s.setTargetX=function(t){this.targetX=t},s.setBaseY=function(t){this.baseY=t},s.setState=function(t){switch(this.state=t,this.buff.setState(this.state),this.state){case 0:this.maxSpeed=this.roleInfo.maxSpeed;break;case 1:this.maxSpeed=this.roleInfo.slowSpeed,this.timeOutID=egret.setTimeout(this.slowTimeHandler,this,1e4)}},s.slowTimeHandler=function(){this.setState(0),egret.clearTimeout(this.timeOutID)},e}(egret.DisplayObjectContainer);egret.registerClass(Role,"Role");var RoleBuff=function(t){function e(){t.call(this),this.buffBmp=new BitmapDisplay,this.buffBmp.setBitmapByName("mist"),this.y=50}__extends(e,t);var i=(__define,e),s=i.prototype;return s.setState=function(t){switch(t){case 0:this.contains(this.buffBmp)&&this.removeChild(this.buffBmp);break;case 1:this.addChild(this.buffBmp)}},e}(egret.DisplayObjectContainer);egret.registerClass(RoleBuff,"RoleBuff");var Smoke=function(t){function e(e){t.call(this),this.xEndSpeed=0,this.xSlowSpeed=0,this.xSpeed=0,this.yEndSpeed=0,this.ySlowSpeed=0,this.ySpeed=0,this.alphaSpeed=.02,this.scaleSpeed=.01,this.remove=!1,this.dir=e,this.sp=new egret.Sprite,this.sp.graphics.beginFill(12369084,.6),this.sp.graphics.drawCircle(0,0,15),this.sp.graphics.endFill(),this.addChild(this.sp),this.xEndSpeed=.5,this.xSlowSpeed=.01,this.xSpeed=2,this.yEndSpeed=.1*Math.random()+.1,this.ySlowSpeed=.005*Math.random()+.001,this.ySpeed=1}__extends(e,t);var i=(__define,e),s=i.prototype;return s.update=function(){this.xSpeed-=this.xSlowSpeed,this.xSpeed<=this.xEndSpeed&&(this.xSpeed=this.xEndSpeed),this.ySpeed-=this.xSlowSpeed,this.ySpeed<=this.yEndSpeed&&(this.ySpeed=this.yEndSpeed),1==this.dir?this.x-=this.xSpeed:this.x+=this.xSpeed,this.y+=this.ySpeed,this.scaleX+=this.scaleSpeed,this.scaleY+=this.scaleSpeed,this.sp.alpha-=this.alphaSpeed,this.sp.alpha<=0&&(this.sp.alpha=0,this.remove=!0)},e}(egret.DisplayObjectContainer);egret.registerClass(Smoke,"Smoke");